!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){var b=[],c=a(document),d=navigator.userAgent.toLowerCase(),e=a(window),f=[],g={ieQuirks:null,msie:/msie/.test(d)&&!/opera/.test(d),opera:/opera/.test(d)};if(navigator.userAgent.indexOf("MSIE")>=1){navigator.userAgent.substring(navigator.userAgent.indexOf("MSIE")+5,navigator.userAgent.indexOf("MSIE")+8)}g.ie6=navigator.userAgent.indexOf("MSIE")>=1&&/msie 6./.test(d)&&"object"!=typeof window.XMLHttpRequest,g.ie7=navigator.userAgent.indexOf("MSIE")>=1&&/msie 7.0/.test(d),a.txtcmoddlg=function(b,c){return a.txtcmoddlg.impl.init(b,c)},a.txtcmoddlg.close=function(){a.txtcmoddlg.impl.close()},a.txtcmoddlg.focus=function(b){a.txtcmoddlg.impl.focus(b)},a.txtcmoddlg.setContainerDimensions=function(){a.txtcmoddlg.impl.setContainerDimensions()},a.txtcmoddlg.setPosition=function(){a.txtcmoddlg.impl.setPosition()},a.txtcmoddlg.update=function(b,c){a.txtcmoddlg.impl.update(b,c)},a.fn.txtcmoddlg=function(b){return a.txtcmoddlg.impl.init(this,b)},a.txtcmoddlg.defaults={appendTo:"body",focus:!0,opacity:50,overlayId:"simpletxtcmoddlg-overlay",overlayCss:{},containerId:"simpletxtcmoddlg-container",containerCss:{},dataId:"simpletxtcmoddlg-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:!1,autoPosition:!0,zIndex:1e3,close:!0,closeHTML:'<a class="txtcmoddlgCloseImg" title="Close"></a>',closeClass:"simpletxtcmoddlg-close",escClose:!0,overlayClose:!1,fixed:!0,position:null,persist:!1,txtcmoddlg:!0,onOpen:null,onShow:null,onClose:null},a.txtcmoddlg.impl={d:{},init:function(b,c){var d=this;if(d.d.data)return!1;if(g.ieQuirks=g.msie&&!a.support.boxModel,d.o=a.extend({},a.txtcmoddlg.defaults,c),d.zIndex=d.o.zIndex,d.occb=!1,"object"==typeof b)b=b instanceof a?b:a(b),d.d.placeholder=!1,b.parent().parent().length>0&&(b.before(a("<span></span>").attr("id","simpletxtcmoddlg-placeholder").css({display:"none"})),d.d.placeholder=!0,d.display=b.css("display"),d.o.persist||(d.d.orig=b.clone(!0)));else{if("string"!=typeof b&&"number"!=typeof b)return alert("SimpleModal Error: Unsupported data type: "+typeof b),d;b=a("<div></div>").html(b)}return d.create(b),b=null,d.open(),a.isFunction(d.o.onShow)&&d.o.onShow.apply(d,[d.d]),d},create:function(c){var d=this;d.getDimensions(),d.o.txtcmoddlg&&g.ie6&&(d.d.iframe=a('<iframe src="javascript:false;"></iframe>').css(a.extend(d.o.iframeCss,{display:"none",opacity:0,position:"fixed",height:f[0],width:f[1],zIndex:d.o.zIndex,top:0,left:0})).appendTo(d.o.appendTo)),d.d.overlay=a("<div></div>").attr("id",d.o.overlayId).addClass("simpletxtcmoddlg-overlay").css(a.extend(d.o.overlayCss,{display:"none",opacity:d.o.opacity/100,height:d.o.txtcmoddlg?b[0]:0,width:d.o.txtcmoddlg?b[1]:0,position:"fixed",left:0,top:0,zIndex:d.o.zIndex+1})).appendTo(d.o.appendTo),d.d.container=a("<div></div>").attr("id",d.o.containerId).addClass("simpletxtcmoddlg-container").css(a.extend({position:d.o.fixed?"fixed":"absolute"},d.o.containerCss,{display:"none",zIndex:d.o.zIndex+2})).append(d.o.close&&d.o.closeHTML?a(d.o.closeHTML).addClass(d.o.closeClass):"").appendTo(d.o.appendTo),d.d.wrap=a("<div></div>").attr("tabIndex",-1).addClass("simpletxtcmoddlg-wrap").css({height:"100%",outline:0,width:"100%"}).appendTo(d.d.container),d.d.data=c.attr("id",c.attr("id")||d.o.dataId).addClass("simpletxtcmoddlg-data").css(a.extend(d.o.dataCss,{display:"none"})).appendTo("body"),c=null,d.setContainerDimensions(),d.d.data.appendTo(d.d.wrap),(g.ie6||g.ieQuirks)&&d.fixIE()},bindEvents:function(){var d=this;a("."+d.o.closeClass).bind("click.simpletxtcmoddlg",function(a){a.preventDefault(),d.close()}),d.o.txtcmoddlg&&d.o.close&&d.o.overlayClose&&d.d.overlay.bind("click.simpletxtcmoddlg",function(a){a.preventDefault(),d.close()}),c.bind("keydown.simpletxtcmoddlg",function(a){d.o.txtcmoddlg&&9===a.keyCode?d.watchTab(a):d.o.close&&d.o.escClose&&27===a.keyCode&&(a.preventDefault(),d.close())}),e.bind("resize.simpletxtcmoddlg orientationchange.simpletxtcmoddlg",function(){d.getDimensions(),d.o.autoResize?d.setContainerDimensions():d.o.autoPosition&&d.setPosition(),g.ie6||g.ieQuirks?d.fixIE():d.o.txtcmoddlg&&(d.d.iframe&&d.d.iframe.css({height:f[0],width:f[1]}),d.d.overlay.css({height:b[0],width:b[1]}))})},unbindEvents:function(){a("."+this.o.closeClass).unbind("click.simpletxtcmoddlg"),c.unbind("keydown.simpletxtcmoddlg"),e.unbind(".simpletxtcmoddlg"),this.d.overlay.unbind("click.simpletxtcmoddlg")},fixIE:function(){var b=this,c=b.o.position;a.each([b.d.iframe||null,b.o.txtcmoddlg?b.d.overlay:null,"fixed"===b.d.container.css("position")?b.d.container:null],function(a,b){if(b){var d="document.body.clientHeight",e="document.body.clientWidth",f="document.body.scrollHeight",g="document.body.scrollLeft",h="document.body.scrollTop",i="document.body.scrollWidth",j="document.documentElement.clientHeight",k="document.documentElement.clientWidth",l="document.documentElement.scrollLeft",m="document.documentElement.scrollTop",n=b[0].style;if(n.position="absolute",a<2)n.removeExpression("height"),n.removeExpression("width"),n.setExpression("height",f+" > "+d+" ? "+f+" : "+d+' + "px"'),n.setExpression("width",i+" > "+e+" ? "+i+" : "+e+' + "px"');else{var o,p;if(c&&c.constructor===Array){var q=c[0]?"number"==typeof c[0]?c[0].toString():c[0].replace(/px/,""):b.css("top").replace(/px/,"");if(o=-1===q.indexOf("%")?q+" + (t = "+m+" ? "+m+" : "+h+') + "px"':parseInt(q.replace(/%/,""))+" * (("+j+" || "+d+") / 100) + (t = "+m+" ? "+m+" : "+h+') + "px"',c[1]){var r="number"==typeof c[1]?c[1].toString():c[1].replace(/px/,"");p=-1===r.indexOf("%")?r+" + (t = "+l+" ? "+l+" : "+g+') + "px"':parseInt(r.replace(/%/,""))+" * (("+k+" || "+e+") / 100) + (t = "+l+" ? "+l+" : "+g+') + "px"'}}else o="("+j+" || "+d+") / 2 - (this.offsetHeight / 2) + (t = "+m+" ? "+m+" : "+h+') + "px"',p="("+k+" || "+e+") / 2 - (this.offsetWidth / 2) + (t = "+l+" ? "+l+" : "+g+') + "px"';n.removeExpression("top"),n.removeExpression("left"),n.setExpression("top",o),n.setExpression("left",p)}}})},focus:function(b){var c=this,d=b&&-1!==a.inArray(b,["first","last"])?b:"first",e=a(":input:enabled:visible:"+d,c.d.wrap);setTimeout(function(){e.length>0?e.focus():c.d.wrap.focus()},10)},getDimensions:function(){var d=void 0===window.innerHeight?e.height():window.innerHeight;b=[c.height(),c.width()],f=[d,e.width()]},getVal:function(a,b){return a?"number"==typeof a?a:"auto"===a?0:a.indexOf("%")>0?parseInt(a.replace(/%/,""))/100*("h"===b?f[0]:f[1]):parseInt(a.replace(/px/,"")):null},update:function(a,b){var c=this;if(!c.d.data)return!1;c.d.origHeight=c.getVal(a,"h"),c.d.origWidth=c.getVal(b,"w"),c.d.data.hide(),a&&c.d.container.css("height",a),b&&c.d.container.css("width",b),c.setContainerDimensions(),c.d.data.show(),c.o.focus&&c.focus(),c.unbindEvents(),c.bindEvents()},setContainerDimensions:function(){var a=this,b=g.ie6||g.ie7,c=a.d.origHeight?a.d.origHeight:g.opera?a.d.container.height():a.getVal(b?a.d.container[0].currentStyle.height:a.d.container.css("height"),"h"),d=a.d.origWidth?a.d.origWidth:g.opera?a.d.container.width():a.getVal(b?a.d.container[0].currentStyle.width:a.d.container.css("width"),"w"),e=a.d.data.outerHeight(!0),h=a.d.data.outerWidth(!0);a.d.origHeight=a.d.origHeight||c,a.d.origWidth=a.d.origWidth||d;var i=a.o.maxHeight?a.getVal(a.o.maxHeight,"h"):null,j=a.o.maxWidth?a.getVal(a.o.maxWidth,"w"):null,k=i&&i<f[0]?i:f[0],l=j&&j<f[1]?j:f[1],m=a.o.minHeight?a.getVal(a.o.minHeight,"h"):"auto";c=c?a.o.autoResize&&c>k?k:c<m?m:c:e?e>k?k:a.o.minHeight&&"auto"!==m&&e<m?m:e:m;var n=a.o.minWidth?a.getVal(a.o.minWidth,"w"):"auto";d=d?a.o.autoResize&&d>l?l:d<n?n:d:h?h>l?l:a.o.minWidth&&"auto"!==n&&h<n?n:h:n,a.d.container.css({height:c,width:d}),a.d.wrap.css({overflow:e>c||h>d?"auto":"visible"}),a.o.autoPosition&&a.setPosition()},setPosition:function(){var b,c,a=this,d=f[0]/2-a.d.container.outerHeight(!0)/2,g=f[1]/2-a.d.container.outerWidth(!0)/2,h="fixed"!==a.d.container.css("position")?e.scrollTop():0;a.o.position&&"[object Array]"===Object.prototype.toString.call(a.o.position)?(b=h+(a.o.position[0]||d),c=a.o.position[1]||g):(b=h+d,c=g),a.d.container.css({left:c,top:b})},watchTab:function(b){var c=this;if(a(b.target).parents(".simpletxtcmoddlg-container").length>0){if(c.inputs=a(":input:enabled:visible:first, :input:enabled:visible:last",c.d.data[0]),!b.shiftKey&&b.target===c.inputs[c.inputs.length-1]||b.shiftKey&&b.target===c.inputs[0]||0===c.inputs.length){b.preventDefault();var d=b.shiftKey?"last":"first";c.focus(d)}}else b.preventDefault(),c.focus()},open:function(){var b=this;b.d.iframe&&b.d.iframe.show(),a.isFunction(b.o.onOpen)?b.o.onOpen.apply(b,[b.d]):(b.d.overlay.show(),b.d.container.show(),b.d.data.show()),b.o.focus&&b.focus(),b.bindEvents()},close:function(){var b=this;if(!b.d.data)return!1;if(b.unbindEvents(),a.isFunction(b.o.onClose)&&!b.occb)b.occb=!0,b.o.onClose.apply(b,[b.d]);else{if(b.d.placeholder){var c=a("#simpletxtcmoddlg-placeholder");b.o.persist?c.replaceWith(b.d.data.removeClass("simpletxtcmoddlg-data").css("display",b.display)):(b.d.data.hide().remove(),c.replaceWith(b.d.orig))}else b.d.data.hide().remove();b.d.container.hide().remove(),b.d.overlay.hide(),b.d.iframe&&b.d.iframe.hide().remove(),b.d.overlay.remove(),b.d={}}}}});