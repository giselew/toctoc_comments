function array_key_exists(e,t){if(!t||t.constructor!==Array&&t.constructor!==Object){return false}return e in t}function tcb64_dec(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var n,r,i,s,o,u,a,f,l=0,c=0,h="",p=[];if(!e){return e}e+="";do{s=t.indexOf(e.charAt(l++));o=t.indexOf(e.charAt(l++));u=t.indexOf(e.charAt(l++));a=t.indexOf(e.charAt(l++));f=s<<18|o<<12|u<<6|a;n=f>>16&255;r=f>>8&255;i=f&255;if(u===64){p[c++]=String.fromCharCode(n)}else if(a===64){p[c++]=String.fromCharCode(n,r)}else{p[c++]=String.fromCharCode(n,r,i)}}while(l<e.length);h=p.join("");return h}function toctoc_comments_pi1_base64_encode(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var n,r,i,s,o,u,a,f,l=0,c=0,h="",p=[];if(!e){return e}if(e.indexOf(">")===-1){e=this.utf8_encode(e+"")}do{n=e.charCodeAt(l++);r=e.charCodeAt(l++);i=e.charCodeAt(l++);f=n<<16|r<<8|i;s=f>>18&63;o=f>>12&63;u=f>>6&63;a=f&63;p[c++]=t.charAt(s)+t.charAt(o)+t.charAt(u)+t.charAt(a)}while(l<e.length);h=p.join("");var d=e.length%3;return(d?h.slice(0,d-3):h)+" === ".slice(d||3)}function utf8_encode(e){if(e===null||typeof e==="undefined"){return""}var t=e+"";var n="",r,i,s=0;r=i=0;s=t.length;for(var o=0;o<s;o++){var u=t.charCodeAt(o);var a=null;if(u<128){i++}else if(u>127&&u<2048){a=String.fromCharCode(u>>6|192)+String.fromCharCode(u&63|128)}else{a=String.fromCharCode(u>>12|224)+String.fromCharCode(u>>6&63|128)+String.fromCharCode(u&63|128)}if(a!==null){if(i>r){n+=t.slice(r,i)}n+=a;r=i=o+1}}if(i>r){n+=t.slice(r,s)}return n}function toctoc_comments_pi1_serialize(e){var t=function(e){var t=0,n=0,r=e.length,i="";for(n=0;n<r;n++){i=e.charCodeAt(n);if(i<128){t+=1}else if(i<2048){t+=2}else{t+=3}}return t};var n=function(e){var t=typeof e,n;var r;if(t==="object"&&!e){return"null"}if(t==="object"){if(!e.constructor){return"object"}var i=e.constructor.toString();n=i.match(/(\w+)\(/);if(n){i=n[1].toLowerCase()}var s=["boolean","number","string","array"];for(r in s){if(i===s[r]){t=s[r];break}}}return t};var r=n(e);var i,s="";switch(r){case"function":i="";break;case"boolean":i="b:"+(e?"1":"0");break;case"number":i=(Math.round(e)===e?"i":"d")+":"+e;break;case"string":i="s:"+t(e)+':"'+e+'"';break;case"array":case"object":i="a";var o=0;var u="";var a;var f;for(f in e){if(e.hasOwnProperty(f)){s=n(e[f]);if(s==="function"){continue}a=f.match(/^[0-9]+$/)?parseInt(f,10):f;u+=this.toctoc_comments_pi1_serialize(a)+this.toctoc_comments_pi1_serialize(e[f]);o++}}i+=":"+o+":{"+u+"}";break;case"undefined":default:i="N";break}if(r!=="object"&&r!=="array"){i+=";"}return i}function utf8_decode(e){var t=[],n=0,r=0,i=0,s=0,o=0;e+="";while(n<e.length){i=e.charCodeAt(n);if(i<128){t[r++]=String.fromCharCode(i);n++}else if(i>191&&i<224){s=e.charCodeAt(n+1);t[r++]=String.fromCharCode((i&31)<<6|s&63);n+=2}else{s=e.charCodeAt(n+1);o=e.charCodeAt(n+2);t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63);n+=3}}return t.join("")}function supports_html5_storage(){try{return"localStorage"in window&&window["localStorage"]!==null}catch(e){return false}}function getInternetExplorerVersion(){var e=-1;if(navigator.appName==="Microsoft Internet Explorer"){var t=navigator.userAgent;var n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(n.exec(t)!==null){e=parseFloat(RegExp.$1)}}return e}function tcisInt(e){return!isNaN(parseInt(e))&&parseFloat(e)===parseInt(e)}function tctrim(e){var t=0;var n=e.length-1;while(t<e.length&&e[t]===" "){t++}while(n>t&&e[n]===" "){n-=1}return e.substring(t,n+1)}function tcdelinefeed(e){return e.replace(/(\r\n|\n|\r)/gm,"")}function findPos(e){var t=0;var n=0;if(e.offsetLeft){t+=parseInt(e.offsetLeft)}if(e.offsetTop){n+=parseInt(e.offsetTop)}if(e.scrollTop&&e.scrollTop>0){n-=parseInt(e.scrollTop)}var r=[];for(i=1;i<100;i++){objparent=e.parentNode;if(objparent){if(objparent.tagName=="body"){break}else{if(e.offsetParent){r=findPos(e.offsetParent);if(!(e.parentNode.id==""&&(e.parentNode.tagName.toUpperCase()=="TABLE"||e.parentNode.tagName.toUpperCase()=="TD"||e.parentNode.tagName.toUpperCase()=="TR"))&&e.parentNode.style.display!="none"){t+=r[0];n+=r[1]}}else if(e.ownerDocument){var s=e.ownerDocument.defaultView;if(!s&&e.ownerDocument.parentWindow){s=e.ownerDocument.parentWindow}if(s){if(s.frameElement){r=findPos(s.frameElement);t+=r[0];n+=r[1]}}}e=objparent}}}return[t,n]}function toctoc_comments_pi1_readCookie(e){var t=e+"=";var n=document.cookie.split(";");for(i=0;i<n.length;i++){var r=n[i];while(r.charAt(0)===" "){r=r.substring(1,r.length)}if(r.indexOf(t)===0){return unescape(r.substring(t.length,r.length)).replace(/\+/," ")}}return false}function toctoc_comments_pi1_setUserDataField(e,t){var n=document.getElementById("toctoc_comments_pi1_"+t+e);var r="";try{if(n&&n.value!==""){r=n.value;n.value=r}if(n&&n.value===""){r=toctoc_comments_pi1_readCookie("toctoc_comments_pi1_"+e);if(typeof r==="string"){r=utf8_decode(r);n.value=r;if(e==="gender"){changedefuserpic(r,t)}}}}catch(i){}}function toctoc_comments_pi1_setUserData(e){toctoc_comments_pi1_setUserDataField("firstname",e);toctoc_comments_pi1_setUserDataField("lastname",e);toctoc_comments_pi1_setUserDataField("location",e);toctoc_comments_pi1_setUserDataField("email",e);toctoc_comments_pi1_setUserDataField("homepage",e);toctoc_comments_pi1_setUserDataField("gender",e)}function toctoc_comments_pi1_getUserDataField(e,t){var n=document.getElementById("toctoc_comments_pi1_"+t+e);var r=0;if(e==="notify"){r=0;if(n){if(n.checked===true){r=1}}return r}else{if(n&&n.value!==""){r=n.value;return r}else{return""}}}function toctoc_comments_pi1_getUserData(e){var t=[];t["commenttitle"]=toctoc_comments_pi1_getUserDataField("commenttitle",e);t["firstname"]=toctoc_comments_pi1_getUserDataField("firstname",e);t["lastname"]=toctoc_comments_pi1_getUserDataField("lastname",e);t["location"]=toctoc_comments_pi1_getUserDataField("location",e);t["email"]=toctoc_comments_pi1_getUserDataField("email",e);t["homepage"]=toctoc_comments_pi1_getUserDataField("homepage",e);t["itemurl"]=toctoc_comments_pi1_getUserDataField("itemurl",e);t["itemurlchk"]=toctoc_comments_pi1_getUserDataField("itemurlchk",e);t["cid"]=toctoc_comments_pi1_getUserDataField("cid",e);t["insert"]=toctoc_comments_pi1_getUserDataField("insert",e);t["captcha"]=toctoc_comments_pi1_getUserDataField("captcha",e);t["level"]=toctoc_comments_pi1_getUserDataField("level",e);t["notify"]=toctoc_comments_pi1_getUserDataField("notify",e);t["gender"]=toctoc_comments_pi1_getUserDataField("gender",e);t["previewselpic"]=previewselpic[e];t["commentparentid"]=toctoc_comments_pi1_getUserDataField("commentparentid",e);t["previewselpreviewid"]=previewselpreviewid[e];var n=document.getElementById("toctoc_comments_pi1_submit_"+e);t["submit"]=n.value;n=document.getElementById(tctnme+e);var r=n.value;r=r.replace(/\t/g,"");r=r.split(">").join("&gt;");r=r.split("<").join("&lt;");r=tctrim(r);r=dbize_emojis(r);t["content"]=this.toctoc_comments_pi1_base64_encode(r);var i=document.getElementById("toctoc_comments_pi1_uplcontenttextbox_"+e);if(i){r=i.value;r=r.replace(/\t/g,"");r=r.split(">").join("&gt;");r=r.split("<").join("&lt;");r=tctrim(r);t["descriptionbyuser"]=r;t["originalfilename"]=toctoc_comments_pi1_getUserDataField("originalfilename",e);t["uploadpicid"]=toctoc_comments_pi1_getUserDataField("uploadpicid",e);t["uploadpicheight"]=toctoc_comments_pi1_getUserDataField("uploadpicheight",e)}else{t["descriptionbyuser"]="";t["originalfilename"]="";t["uploadpicid"]="";t["uploadpicheight"]=0}var s=this.toctoc_comments_pi1_serialize(t);var o=this.toctoc_comments_pi1_base64_encode(s);return o}function dbize_emojis(e){var t=/(%u)+/g;var n=escape(e);if(typeof emotjicodes!=="undefined"){for(i=0;i<emotjicodes.length;i++){candemo=escape(emotjicodes[i][1]);var r=String(n).split(candemo);if(r.length>1){emoout=candemo.replace(t,"\\u");n=r.join(emoout)}}}return unescape(n)}function comment_formhider(e,t,n,r,i,s){var o="0";var u="4px 0 5px "+boxmodelLabelWidth+"px";var a="0";var f="0";var l="4px 0 0";var c="0px";if(global_loggedon===1&&e!=="1"){f="5px 0 5px";if(getInternetExplorerVersion()>8){if(confuseUserImage===1){o="0 0 0 8px"}}else{if(confuseUserImage===1){o="0 0 0 9px"}}u="4px 8px -4px "+boxmodelSpacing+"px";if(boxmodelLabelWidth==0){u="0"}}var h=e;var p=String(e).indexOf("6g9");if(p>0){l="8px 0 0 4px";var d=document.getElementById("toctoc_comments_cap_"+e);if(d){c="8px 0 0"}var v=String(e).split("6g9");h=v[1]}if(t===1){s.focus()}else{var m=document.getElementById("formhider-"+e);var g=document.getElementById("tx-tc-uimg-"+e);var y=document.getElementById("textarea-"+e);var b=document.getElementById(tcsbmtnme+e);var w=document.getElementById("tx-tc-div-submit"+e);var E=document.getElementById("tx-tc-formsqueezer-"+e)}if(t===2||t===3){var S=document.getElementById(tctnme+e)}if(t===2){if(overlogout===0){var x=-80-parseInt(confuserpicsize);y.style.margin=a;if(S){var T=this.tctrim(n).length;var N=this.tctrim(S.value);var C=N.substr(0,T);if(C===this.tctrim(n)||N===""){S.style.height=boxmodelTextareaHeight+"px"}}b.style.display="none";w.style.display="none";b.style.height=0;b.style.margin=0;m.style.display="none";m.style.minHeight=0;m.style.margin=x+"px 0 0";E.style.height=boxmodelTextareaAreaTotalHeight+"px";if(global_loggedon===1){if(!g){g=document.getElementById("tx-tc-ct-uimg-"+e)}if(g){if(!jQuery("#"+g.id).hasClass("tx-tc-nodisp")){jQuery("#"+g.id).addClass("tx-tc-nodisp")}g.style.display="none";g.style.margin="-"+confuserpicsize+"px 0 0"}m.style.margin="-"+confuserpicsize+"px 0 0"}if(toctoc_comments_fadeout("tx-tc-cts-prv-ct-"+e)===true){}}}if(t===3){jQuery("#tx-tc-ct-report-"+h).css("display","none");y.style.margin=o;loginformaddhiderdisplay="block";if(loginRequiredIdLoginForm===""||global_loggedon===1){previewselcomment[e]=0;b.style.display="block";w.style.display="block";b.style.height="auto";b.style.margin=u}else{if(loginRequiredIdLoginForm!==""){if(lastshownloginformid!==e){if(lastshownloginformid!==""){tt_showlogin(lastshownloginformid,0);comment_formhider(lastshownloginformid,2,utf8_decode(tcb64_dec(textAddComment)),0,1);jQuery("#toctoc_comments_pi1_contenttextbox_"+lastshownloginformid).elastic()}}loginformaddhiderdisplay="table"}}m.style.height="";m.style.minHeight="";m.style.margin=f;m.style.display=loginformaddhiderdisplay;E.style.height="auto";if(y.style.minHeight==""){y.style.minHeight="0px"}var k=y.style.minHeight;var L=k.substr(0,k.indexOf("p"));var A=y.offsetHeight;var O=0;var M="";var _=0;var D=0;if(L<A){O=parseInt(A)-parseInt(L);M=m.style.margin;if(M.length===1){D=O}else{_=M.substr(0,M.indexOf("p"));D=parseInt(_)+parseInt(O)}m.style.margin=c}if(global_loggedon===1){if(!g){g=document.getElementById("tx-tc-ct-uimg-"+e)}if(g){if(jQuery("#"+g.id).hasClass("tx-tc-nodisp")){jQuery("#"+g.id).removeClass("tx-tc-nodisp")}g.style.display="block";g.style.margin=l}}jQuery("#formhider-"+e).slideDown();jQuery("#formhider-"+e).css("overflow","visible");if(S.value==""){d=document.getElementById("tx-tc-div-submit"+e);if(loginRequiredIdLoginForm===""||global_loggedon===1){if(d.style.opacity!=="0.5"){jQuery("#tx-tc-div-submit"+e).css("opacity","0.6")}jQuery("#formhider-"+e).css("opacity","0.6");d=document.getElementById("tx-tc-div-submit"+e);if(d){d.disabled=true}}if(global_loggedon===0&&tclogincard!==""){jQuery("#tx-tc-div-submit"+e).css("opacity","1")}d=document.getElementById("tx-tc-"+e+"uploaddiv");if(d){d.style.visibility="hidden"}if(global_loggedon!==1){d=document.getElementById("toctoc_comments_pi1_"+e+"firstname");if(d){d.disabled=true}d=document.getElementById("toctoc_comments_pi1_"+e+"commenttitle");if(d){d.disabled=true}d=document.getElementById("toctoc_comments_pi1_"+e+"lastname");if(d){d.disabled=true}d=document.getElementById("toctoc_comments_pi1_"+e+"homepage");if(d){d.disabled=true}d=document.getElementById("toctoc_comments_pi1_"+e+"location");if(d){d.disabled=true}d=document.getElementById("toctoc_comments_pi1_"+e+"email");if(d){d.disabled=true}d=document.getElementById("toctoc_comments_pi1_"+e+"notify");if(d){d.disabled=true}d=document.getElementById("tx-tc-ct-form-gender"+e);if(d){d.style.visibility="hidden"}}else{d=document.getElementById("toctoc_comments_pi1_"+e+"commenttitle");if(d){d.disabled=true}}}tttip("t101","#tx-tc-uimg-"+e+"[title]");tttip("t201","#tx-tc-"+e+"uploaddiv img[title]");tttip("t101","#toctoc_comments_pi1_"+e+"notify[title]")}}function commentform_validate(e,t){var n=utf8_decode(tcb64_dec(textErrCommentNull));var r=errCommentRequiredLength;var i=utf8_decode(tcb64_dec(textErrCommentLength));var s=e;if(!tcisInt(e)){e=t}else{s=tctnme+e}var o="";o=e;var u=String(s).split("6g9");if(u.length===3){e=u[0].replace(tctnme,"")}if(document.getElementById(s).value===""){information(n,e,function(){});document.getElementById(s).focus();return false}var a=document.getElementById(s).value.length;if(a<r){information(i,e,function(){});document.getElementById(s).focus();return false}return true}function tcOpenFile(e,t){uploadtype=t;document.getElementById(e).click()}function toctoc_comments_fadein(e){var t=0;t=getopacity(e);var n=0;n=parseFloat(t)+parseFloat("0.1");if(parseFloat(n)<=.95){setopacity(e,n,"toctoc_comments_fadein");window.setTimeout("toctoc_comments_fadein('"+e+"')",50)}else{setopacity(e,1,"toctoc_comments_fadein");return true}}function toctoc_comments_fadeout(e){var t=1;var n=document.getElementById(e);if(n){if(n.style.opacity){t=n.style.opacity}else{t=1}var r=0;r=parseFloat(t)-.1;if(parseFloat(r)>=.1){setopacity(e,r,"toctoc_comments_fadeout");window.setTimeout("toctoc_comments_fadeout('"+e+"')",50)}else{jQuery("#"+e).addClass("tx-tc-nodisp");jQuery("#"+e).removeClass("tx-tc-blockdisp");return true}}else{return true}}function toctoc_comments_uc_fadeout(e,t,n){if(uc_closed[t]<3){if(document.getElementById(e).style.display!=="none"){opanow=getopacity(e);opanew=parseFloat(opanow)-.1;if(opanew>=.1){setopacity(e,opanew,"toctoc_comments_uc_fadeout");window.setTimeout("toctoc_comments_uc_fadeout('"+e+"', '"+t+"', '"+n+"')",50)}else{document.getElementById(e).style.display="none";document.getElementById(e).style.height="0px";uc_closed[t]=0;return true}}else{return true}}else if(uc_closed[t]===10){uc_closed[t]=2;window.setTimeout("toctoc_comments_uc_fadeout('"+e+"', '"+t+"', '"+n+"')",n)}}function toctoc_comments_uc_close(e){setopacity("tx-tc-cts-uc-"+e,0,"toctoc_comments_uc_close");document.getElementById("tx-tc-cts-uc-"+e).style.display="none";document.getElementById("tx-tc-cts-uc-"+e).style.height="0px";uc_closed[e]=20}function toctoc_comments_ftm_close(e){setopacity("tx-tc-cts-ftm-"+e,0,"toctoc_comments_ftm_close");document.getElementById("tx-tc-cts-ftm-"+e).style.display="none";document.getElementById("tx-tc-cts-ftm-"+e).style.height="0px"}function toctoc_comments_uc_show(e,t,n){window.setTimeout("toctoc_comments_uc_fadeout('"+t+"', '"+n+"', '"+e+"')",e);return true}function show_uc(e,t,n,r,i,s){(function(o){if(uc_closed[e]===20){uc_closed[e]=10}else{uc_closed[e]=1}setopacity("tx-tc-cts-uc-"+e,"0.9","show_uc");o(".tx-tc-ct-box-ctclose").css("visibility","hidden");o("#tx-tc-cts-uc-"+e).css("height","60px");o("#tx-tc-cts-uc-"+e).css("display","block");if(document.getElementById("tx-tc-cts-uc-inner-"+e).innerHTML.length<50){document.getElementById("tx-tc-cts-uc-inner-"+e).innerHTML="<p><b>"+utf8_decode(tcb64_dec(textLoading))+"</b></p>";o.ajax({type:"POST",url:"index.php",async:false,data:"eID=toctoc_comments_ajax&cmd=getuc&imagetag="+i+"&toctocuserid="+r+"&data="+n+"&cid="+t+"&commentid="+e,success:function(t){var n=String(t).split("typo3temp");var r=String(n[1]).split('"');var i="typo3temp"+r[0];o("#tx-tc-cts-uc-inner-"+e).html(t);if(document.getElementById("tx-tc-cts-uc-pic2-"+e).innerHTML==="***"){document.getElementById("tx-tc-cts-uc-pic2-"+e).innerHTML="";o("#tx-tc-cts-uc-pic2-"+e).css("display","block");o("#tx-tc-cts-uc-pic2-"+e).css("width","364px");o("#tx-tc-cts-uc-pic2-"+e).css("background","url('"+i+"') repeat scroll center center transparent")}tttip("t10-12",".tx-tc-ct-uc-pic img[title]");tttip("t101","#tx-tc-cts-uc-inner-"+e+" img[title]");tttip("t10-16","#tx-tc-cts-uc-"+e+" input[title]")}})}setopacity("tx-tc-cts-uc-"+e,"1","show_uc");o("#tx-tc-cts-uc-"+e).css("display","block");o("#tx-tc-cts-uc-"+e).css("height","auto");o(".tx-tc-ct-box-ctclose").css("visibility","visible");toctoc_comments_uc_show(s,"tx-tc-cts-uc-"+e,e)})(jQuery)}function tttip(e,t){(function(n){if(e==="hide"){n(".tx-tc-tooltip").hide()}else if(e==="hide2"){n(".tx-tc-tooltip2").hide()}else{if(e==="t101"){n(""+t+"").cooltip({position:"top center",offset:[-1,0],effect:"fade",opacity:1,tipClass:"tx-tc-tooltip"})}else if(e==="t10-12"){n(""+t+"").cooltip({offset:[-12,0],effect:"fade",opacity:1,tipClass:"tx-tc-tooltip"})}else if(e==="t10-16"){n(""+t+"").cooltip({offset:[-1,-16],effect:"fade",opacity:1,tipClass:"tx-tc-tooltip"})}else if(e==="t10-18"){n(""+t+"").cooltip({offset:[-1,-18],effect:"fade",opacity:1,tipClass:"tx-tc-tooltip"})}else if(e==="t201"){n(""+t+"").cooltip({position:"top right",offset:[-1,0],effect:"fade",opacity:1,tipClass:"tx-tc-tooltip2"})}else if(e==="t201-5"){n(""+t+"").cooltip({position:"top right",offset:[5,-5],effect:"fade",opacity:1,tipClass:"tx-tc-tooltip2"})}else if(e==="temo"){n(""+t+"").cooltip({offset:[-1,0],effect:"fade",opacity:1,tipClass:"tx-tc-tooltipemoji"})}else if(e==="t201-65"){n(""+t+"").cooltip({position:"top right",offset:[-1,-65],effect:"fade",opacity:1,tipClass:"tx-tc-tooltip2"})}else if(e==="t201-20"){n(""+t+"").cooltip({offset:[2,0],opacity:1,tipClass:"tx-tc-tooltip2"}).dynamic({bottom:{direction:"down",bounce:true}})}}})(jQuery)}function patchtemppicresshow(e,t,n){if(global_loggedon===1){var r="tx-tc-cts-img-c"+t;var i="tx-tc-uimg-"+n;e=e.replace(i,r);e=e.replace(" margin: 4px 0px 0px;","");e=e.replace(" margin: 8px 0px 0px 4px;","");e=e.replace("display: block;","");e=e.replace("display: none;","");e=e.replace('style="" ',"");e=e.replace(' class="tx-tc-margin0"',' class="tx-tc-margin0 tx-tc-nodisp"');if(e.indexOf("tx-tc-nodisp")===-1){e=e.replace('class="tx-tc-userpic','class="tx-tc-userpic tx-tc-nodisp')}e=e.replace('align="left" ',"")}return e}function toctoc_comments_delete(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=this.toctoc_comments_pi1_serialize(tctreestate);var v=this.toctoc_comments_pi1_base64_encode(d);var m=utf8_decode(tcb64_dec(textDeleteConfirm));var g=0;var y=0;var b=p;var w=String(p).split("6g9");if(w.length===3){b=w[0]}tcconfirm(m,f,function(){var p=document.getElementById("tx-tc-cts-img-"+a);var d="";if(p){d=document.getElementById("tx-tc-cts-img-"+a).outerHTML}else{d=document.getElementById("tx-tc-cts-img-c"+f).outerHTML}d=patchtemppicresshow(d,a,f);setopacity("tx-tc-"+s+"-dp-"+e,"0.4","toctoc_comments_delete");jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:false,data:"ref="+e+"&rating="+t+"&data="+n+"&datac="+o+"&datathis="+u+"&cuid="+a+"&check="+r+"&cmd="+i+"&cid="+f,success:function(i){if(i!=="<div>db403</div>"){jQuery("#tx-tc-"+s+"-"+e).html(i);jQuery("#tx-tc-"+s+"-"+e).css("min-height","0px")}else{g=1;l=1}y=1;if(l!==0){y=0;setopacity("tx-tc-cts-dp-"+h,"0.4","toctoc_comments_delete");jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:false,data:"ref="+h+"&rating="+t+"&data="+n+"&datac="+o+"&datathis="+u+"&capsess=0&check="+r+"&cmd=showcomments"+"&userpic="+d+"&commentsimgs="+c+"&tctreestateenc="+v+"&softcheck=1"+"&extref="+b,success:function(e){if(e.indexOf('<div id="dummy"></div>')>0){var t=e.split('<div id="dummy"></div>');tophtml=t[0];e=t[1];jQuery("#tx-tc-cts-dp-split-"+h).html(tophtml);window.setTimeout("tcrebind('#tx-tc-cts-dp-split-"+h+"')",100);window.setTimeout("tcrebindemo('#tx-tc-cts-dp-split-"+h+"')",110)}jQuery("#tx-tc-cts-"+h).html(e);window.setTimeout("tcrebind('#tx-tc-cts-"+h+"')",100);window.setTimeout("tcrebindemo('#tx-tc-cts-"+h+"')",110)}})}}});window.setTimeout("tttip('hide');",1e3);if(y===1){y=this.updatecommentscount(f,-1)}if(g===1){messageon=true}})}function cannotdelete(e){textmsg=utf8_decode(tcb64_dec(textmessagecannotdelete));information(textmsg,e,function(){});window.setTimeout("tttip('hide');",1e3);messageon=false;return false}function cannotinsert(e){textmsg=utf8_decode(tcb64_dec(textmessagecannotinsert));information(textmsg,e,function(){});messageon=false;return false}function tcconfirm(e,t,n){jQuery("#confirm"+t).txtcmoddlg({closeHTML:"<a href='#' title='"+utf8_decode(tcb64_dec(textDgClose))+"' class='txtcmoddlg-close'>x</a>",position:["20%"],overlayId:"confirm-overlay",containerId:"confirm-container",onShow:function(t){var r=this;jQuery(".message",t.data[0]).append(e);jQuery(".yesconfirm",t.data[0]).click(function(){if(jQuery.isFunction(n)){n.apply()}r.close()})}});if(!messageon){return true}}function information(e,t,n){jQuery("#information"+t).txtcmoddlg({closeHTML:"<a href='#' title='"+utf8_decode(tcb64_dec(textDgClose))+"' class='txtcmoddlg-close'>x</a>",position:["20%"],overlayId:"confirm-overlay",containerId:"confirm-container",onShow:function(t){var r=this;jQuery(".message",t.data[0]).append(e);jQuery(".yes",t.data[0]).click(function(){if(jQuery.isFunction(n)){n.apply()}r.close()})}})}function toctoc_comments_denotify(e,t,n,r,i,s,o,u,a,f){setopacity("dnf"+a,"0.4","toctoc_comments_denotify");jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:false,data:"ref="+e+"&rating="+t+"&data="+n+"&datac="+o+"&datathis="+u+"&cuid="+a+"&check="+r+"&cmd="+i+"&cid="+f,success:function(e){jQuery("#dnf"+a).html(e)}});jQuery("#dnf"+a).css("display","none")}function toctoc_comments_browse(e,t,n,r,s,o,u,a,f,l,c,h){var p=this.toctoc_comments_pi1_serialize(tctreestate);var d=this.toctoc_comments_pi1_base64_encode(p);setopacity("tx-tc-cts-ctsbrowse-"+l,"0.4","toctoc_comments_browse 1");var v=document.getElementById("tx-tc-cts-ctsbrowse-hide-"+l);if(v){setopacity("tx-tc-cts-ctsbrowse-hide-"+l,"0.4","toctoc_comments_browse 1")}var m="";var g=document.getElementById("tx-tc-"+o+"-"+e).innerHTML;jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:false,data:"ref="+e+"&rating="+t+"&data="+n+"&datac="+u+"&datathis="+a+"&startpoint="+f+"&check="+r+"&cmd="+s+"&cid="+l+"&totalrows="+c+"&commentsimgs="+h+"&tctreestateenc="+d,success:function(t){if(t.indexOf('<div class="dummy"></div><div class="dummy2">')!==-1){m=t.split('<div class="dummy"></div><div class="dummy2">');t=m[0];var n=m[1];n=n.replace("</div>","");commentsAjaxDataLoginSess[l]=n}if(t.indexOf('<div id="dummy"></div>')>0){m=t.split('<div id="dummy"></div>');tophtml=m[0];t=m[1];jQuery("#tx-tc-cts-dp-split-"+e).html(tophtml);window.setTimeout("tcrebind('#tx-tc-cts-dp-split-"+e+"')",100);window.setTimeout("tcrebindemo('#tx-tc-cts-dp-split-"+e+"')",110)}var r=g.split('<div id="tx-tc-cts-ct-tx-tc-cts_');var s=r.length;var o=r[parseInt(s-1)].split('"');var u=o[0];var a=t.split('<div id="tx-tc-cts-ct-tx-tc-cts_'+u);var f=1;var c=[];var h="";var p="";if(a.length>=2){p='<div id="tx-tc-cts-ct-tx-tc-cts_'+u+a[1]}else{var d=t.split('<div id="tx-tc-cts-ct-tx-tc-cts_');var v=d.length;var y=d[parseInt(v-1)].split('"');h=y[0];var b=g.split('<div id="tx-tc-cts-ct-tx-tc-cts_');var w=b.length;var E=[];f=1;if(tctrim(b[0])==""){f=2}for(i=f;i<w;i++){removerefreshhtmlidarr=[];removerefreshhtmlidarr=b[i].split('"');E[i-f]=removerefreshhtmlidarr[0]}var S=[];var x=0;var T=-1;for(i=0;i<w-1;i++){if(x==1||h==E[i]){if(x==1){T++;S[T]=E[i]}x=1}}}var N=p.split('<div id="tx-tc-cts-ct-tx-tc-cts_');var C=N.length;var k="";f=0;if(p!=""){if(tctrim(N[0])==""){f=1}for(i=f;i<C;i++){k+='<div id="tx-tc-cts-ct-tx-tc-cts_'+N[i]}}var L=k.split('<div id="tx-tc-cts-ct-tx-tc-cts_');var A=L.length;var O="";f=1;if(tctrim(L[0])==""){f=2}var M=[];for(i=f;i<A;i++){M=[];M=L[i].split('"');O=O+'<div id="tx-tc-cts-ct-tx-tc-cts_'+L[i];c[i-f]=M[0]}if(O==""){O=k}var _=O.split('<div class="tx-tc-cts-ctsbrowse" id="tx-tc-cts-ctsbrowse-'+l+'">');var D=_.length;var P=_[0];var H=[];f=0;if(D>1){f=1}var B=_[f].substr(0,_[f].lastIndexOf("</span>"))+"</span></div>";H=B.split("</div>");var j=H[0];var F="";if(H.length>1&&tctrim(j)!="</span>"){if(tctrim(j)!=""){jQuery("#tx-tc-cts-ctsbrowse-"+l).html(j);window.setTimeout("tcrebind('#tx-tc-cts-ctsbrowse-"+l+"')",100)}F=H[1].replace('<div class="tx-tc-cts-ctsbrowse-hide" id="tx-tc-cts-ctsbrowse-hide-'+l+'">',"");if(jQuery("#tx-tc-cts-ctsbrowse-hide-"+l).html()!=null){jQuery("#tx-tc-cts-ctsbrowse-hide-"+l).html(F)}else{F='<div class="tx-tc-cts-ctsbrowse-hide" id="tx-tc-cts-ctsbrowse-hide-'+l+'">'+F+"</div>";jQuery("#tx-tc-cts-ctsbrowse-"+l).after(F)}window.setTimeout("tcrebind('#tx-tc-cts-ctsbrowse-hide-"+l+"')",200)}else{jQuery("#tx-tc-cts-ctsbrowse-hide-"+l).remove();_=t.split('<div class="tx-tc-cts-ctsbrowse" id="tx-tc-cts-ctsbrowse-'+l+'">');var I='<div class="tx-tc-cts-ctsbrowse" id="tx-tc-cts-ctsbrowse-'+l+'">'+_[1];j=I.substr(0,I.lastIndexOf("</span>"))+"</span></div>";if(tctrim(j)!=""){jQuery("#tx-tc-cts-ctsbrowse-"+l).html(j);window.setTimeout("tcrebind('#tx-tc-cts-ctsbrowse-"+l+"')",200)}}if(P==""){for(i=0;i<S.length;i++){jQuery("#tx-tc-cts-ct-tx-tc-cts_"+S[i]).remove();if(edituid==S[i]){editon=false}}}else{jQuery("#tx-tc-cts-ct-tx-tc-cts_"+u).after(P);for(i=0;i<c.length;i++){window.setTimeout("tcrebind('#tx-tc-cts-ct-tx-tc-cts_"+c[i]+"')",(i+2)*500);window.setTimeout("tcrebindemo('#tx-tc-cts-ct-tx-tc-cts_"+c[i]+"')",110)}}t=""}});setopacity("tx-tc-cts-ctsbrowse-"+l,"1","toctoc_comments_browse 2");v=document.getElementById("tx-tc-cts-ctsbrowse-hide-"+l);if(v){setopacity("tx-tc-cts-ctsbrowse-hide-"+l,"1","toctoc_comments_browse 1")}}function updateCIDList(e,t){if(loginRequiredIdLoginForm!=""){elem=document.getElementById(tctnme+e);if(elem){checkstr=loginRequiredRefreshCIDs.replace(e+",","");if(checkstr==loginRequiredRefreshCIDs){loginRequiredRefreshCIDs=loginRequiredRefreshCIDs+e+",";loginRequiredRefreshRecs=loginRequiredRefreshRecs+t+","}}}}function toctoc_comments_refresh(e,t,n,r){if(r!==1){r=0}var s=this.toctoc_comments_pi1_serialize(tctreestate);var o=this.toctoc_comments_pi1_base64_encode(s);var u=e.lastIndexOf("_");var a=e.substr(u+1);a=a.replace("'","");toctoc_comments_refresh_single(e,t,n,r,o);var f=loginRequiredRefreshCIDs.split(",");var l=loginRequiredRefreshRecs.split(",");for(i=0;i<f.length;i++){if(f[i]!==""&&f[i]!==t){toctoc_comments_refresh_single(l[i],f[i],0,r,o);u=l[i].lastIndexOf("_");a=l[i].substr(u+1);a=a.replace("'","")}}}function toctoc_comments_refresh_single(e,t,n,r,i){e=e.replace(/\'/g,"");var s=e;var o=e.replace("tt_content_","");if(o===e){e="tt_content_"+t}var u=e.lastIndexOf("_");var a=e.substr(u+1);a=a.replace("'","");var f=commentsAjaxData[a];var l=commentsAjaxDataImg[a];var c=commentsAjaxThisData[a];var h="";var p="";if(r===1){p=commentsAjaxDataLogout[a]}else{p=commentsAjaxDataLogin[a]}var d=commentsAjaxDataLoginSess[a];var v=1;jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:true,data:"ref="+e+"&rating="+v+"&islogout="+r+"&data="+f+"&dataLogin="+p+"&dataLoginSess="+d+"&isrefresh=1&datac="+h+"&datathis="+c+"&capsess=0&check=&cmd=showcomments&userpic=&commentsimgs="+l+"&tctreestateenc="+i+"&extref="+s,success:function(e){tttip("hide");if(e.indexOf('<div id="dummy"></div>')>0){var t=e.split('<div id="dummy"></div>');tophtml=t[0];e=t[1];if(t.length>3){jQuery("#tx-tc-cts-dp-split-"+s).html(tophtml);jQuery("#tx-tc-form-dp-"+s).html(t[2]);jQuery("#tx-tc-cts-"+s).html(e);t[3]=t[3].replace("<div>","");t[3]=t[3].replace("</div>","");commentsAjaxData[a]=t[3]}else{if(t[2]){jQuery("#tx-tc-cts-dp-"+s).html(tophtml);jQuery("#tx-tc-form-dp-"+s).html(e);t[2]=t[2].replace("<div>","");t[2]=t[2].replace("</div>","");commentsAjaxData[a]=t[2]}else{console.log("Unexpected HTML from Server: "+e)}}if(r==1){global_loggedon=0}else{global_loggedon=1}tcrebind("#tx-tc-cts-dp-split-"+s);tcrebindemo("#tx-tc-cts-dp-split-"+s);tcrebind("#tx-tc-form-dp-"+s);tcrebindemo("#tx-tc-form-dp-"+s);tcrebind("#tx-tc-cts-"+s);tcrebindemo("#tx-tc-cts-"+s);if(n!==0){var i=document.getElementById(tctnme+n);if(i){var o=n.split("6g9");var u="";if(currentcommenttext[i.id]){u=currentcommenttext[i.id]}if(o.length>1){var f=o[1];if(confreplyModeInline===1){if(confreplyModeInlineOpenForm===0){jQuery("#tx-tc-ct-ry-fh-"+f).css("display","none");jQuery("#tx-tc-cts-rply-"+f).css("display","block");i.focus();i.value=u;previewselcomment[a]=f}else{i.value=u;i.focus();i.value=u;previewselcomment[a]=f}}}else{n=previewselcomment[a];i.value=u;i.focus();i.value=u;previewselcomment[a]=n}if(u!==""){previewstarted[a]=toctoc_checkurl(0,document.getElementById('toctoc_comments_pi1_contenttextbox_" + commentidin +"'),n,previewstarted[a],"jedi",0,"","",maxCommentLength)}}}tttip("t101",".tx-tc-ct-denotifybutton[title]")}else{console.log("success, but unexpected HTML from Server: "+e)}},error:function(e,t,n){console.log("error: unexpected HTML from Server: "+t+", error: "+n)}})}function setucclick(e){jQuery(e).on("click",function(){ucclick(this)})}function toctoc_comments_submit(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=1;if(!s){return}if(s.indexOf("cts")>=0||s.indexOf("form")>=0){if(!jQuery("#"+tcsbmtnme+f).hasClass("tx-tc-sbinit")){return false}var g=d+200;var y=d+5;var b=d+13;var w=1;var E=tctrim(e.substr(11,1e3));var S=p;var x=String(p).split("6g9");var T=0;if(x.length===3){S=x[0];T=parseInt(x[1]+""+x[2])}var N=f;x=String(f).split("6g9");if(x.length===3){N=x[0]}var C="";var k="";if(global_loggedon===1){var L=document.getElementById("tx-tc-uimg-"+E).outerHTML;C=L.replace("block","none")}if(a==="1"){a=document.getElementById("toctoc_comments_pi1-cap-"+f).value;setopacity("toctoc_comments_cap_"+f,"0.4","toctoc_comments_submit 3");w=0;jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:false,data:"cmd=checkcap&cid="+f+"&code="+a,success:function(e){if(e==="1"){w=1;a=4}else{l=tctrim(l);if(l!==""){jQuery("#tx-tc-cap-message-dp-"+f).css("display","block");jQuery("#tx-tc-cap-message-"+f).html(""+l)}else{jQuery("#tx-tc-cap-message-dp-"+f).css("display","none")}w=0}setopacity("toctoc_comments_cap_"+f,"1","toctoc_comments_submit 4")}})}if(w===1){var A=0;var O=0;setopacity("tx-tc-"+s+"-dp-"+p,"0.4","toctoc_comments_submit 5");jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:false,data:"ref="+e+"&rating="+t+"&data="+n+"&datac="+o+"&datathis="+u+"&capsess="+a+"&check="+r+"&cmd="+i+"&userpic="+C+"&extref="+S+"&commentreplyid="+T,success:function(e){A=tctrim(e.substr(8,20));var t=A.indexOf(">");A=A.substr(0,t);if(!tcisInt(A)){A=0;O=0}else{var n="<div id="+A+"></div>";e=e.replace(n,"");O=tctrim(A.substr(0,1));A=parseInt(tctrim(A.substr(3,20)))}jQuery("#tx-tc-"+s+"-"+p).html(e);var r=/(\\u)+/g;tmpcontent=document.getElementById(tctnme+f).value;var i=tmpcontent.replace(r,"%u");tmpcontent=unescape(i);document.getElementById(tctnme+f).value=tmpcontent;tttip("t101",".tx-tc-ct-form-field-ntf input[title]");if(v!==""&&A!==0){previewhtml[f]=""}if(A!==0){var o=document.getElementById("tx-tc-ct-ry-frame-"+f);if(o){if(o.style.display!=="none"){o.style.display="none"}}}if(v!==""&&A===0){jQuery("#tx-tc-form-wpp-"+f).html(previewhtml[f]);jQuery("#tx-tc-form-dp-wpp-"+f).css("display","block");var u=document.getElementById("formhider-"+f);var a=u.offsetHeight;u.style.height=String(parseInt(a)+parseInt(b))+"px";jQuery("#tx-tc-form-dp-wpp-"+f).css("min-height",y+"px");jQuery("#tx-tc-form-dp-wpp-"+f).css("max-height",g+"px");var l=0;var c=0;if(v.indexOf("pvs-images")>2){l=1}if(windowpreviewstarted[f]===2){if(previewselpic[f]!==888){c=1;jQuery("#tx-tc-form-wpp-working"+f).css("display","none")}}else{c=1}if(l===1&&c===1){jQuery("#tx-tc-cts-pvsprevnext-"+f).css("display","block");jQuery("#tx-tc-cts-pvsprev-"+f).css("display","block");jQuery("#tx-tc-cts-pvsnext-"+f).css("display","block");jQuery("#tx-tc-cts-nopreviewpic-"+f).css("display","block")}jQuery("#tx-tc-cts-pvsfuncs-"+f).css("display","block");jQuery("#tx-tc-cts-pvsnopreview-"+f).css("display","block");show_pvs_pic(f,previewselpic[f])}if(O>=2&&A!==0){previewselpreviewid[f]=0;previewselpic[f]=888}tttip("t101",".tx-tc-ct-denotifybutton[title]");window.setTimeout("tcrebind('#tx-tc-"+s+"-"+p+"')",100);window.setTimeout("tcrebindemo('#tx-tc-"+s+"-"+p+"')",110);var h=document.getElementById("tx-tc-ct-form-gender"+f);if(h){tttip("t101","#tx-tc-ct-form-gender"+f+" img[title]")}if(confuseEmoji>0){tttip("t101","#tx-tc-smilie-icon-"+f+"[title]")}tttip("t10-18","#tx-tc-cts-ftm-"+f+" input[title]");tttip("t101","#tx-tc-uimg-"+f+"[title]");tttip("t201","#tx-tc-"+f+"uploaddiv img[title]");tttip("t101","#toctoc_comments_caprefresh_"+f+"[title]")}});setopacity("tx-tc-"+s+"-dp-"+S,"1","toctoc_comments_submit 6");if(parseInt(A)>0){if(parseInt(O)!==2){if(!jQuery("#tx-tc-cts-img-"+f).hasClass("tx-tc-nodisp")){jQuery("#tx-tc-cts-img-"+f).addClass("tx-tc-nodisp")}var M=this.toctoc_comments_pi1_serialize(tctreestate);var _=this.toctoc_comments_pi1_base64_encode(M);previewselpreviewid[f]=0;previewselpic[f]=888;k=patchtemppicresshow(L,E,f);setopacity("tx-tc-cts-dp-"+S,"0.4","toctoc_comments_submit 7");jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:false,data:"ref="+e+"&rating="+t+"&data="+n+"&datac="+o+"&datathis="+u+"&capsess="+a+"&check="+r+"&cmd=showcomments"+"&userpic="+k+"&commentsimgs="+c+"&tctreestateenc="+_+"&extref="+S,success:function(e){if(e.indexOf('<div id="dummy"></div>')>0){var t=e.split('<div id="dummy"></div>');tophtml=t[0];e=t[1];jQuery("#tx-tc-cts-dp-split-"+S).html(tophtml);tttip("t101",".tx-tc-ct-denotifybutton[title]");window.setTimeout("tcrebind('#tx-tc-cts-dp-split-"+S+"')",100);window.setTimeout("tcrebindemo('#tx-tc-cts-dp-split-"+S+"')",110);setucclick("#tx-tc-cts-dp-split-"+S+" .tx-tc-picclasslink")}jQuery("#tx-tc-cts-"+S).html(e);window.setTimeout("tcrebind('#tx-tc-cts-"+S+"')",100);window.setTimeout("tcrebindemo('#tx-tc-cts-"+S+"')",110);previewselcomment[f]=0;reset_previewvars(f)}});setopacity("tx-tc-cts-dp-"+S,"1","toctoc_comments_submit 8");jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:true,data:"ref="+A+"&data="+n+"&check="+r+"&cmd=handlecn",success:function(e){}})}}else if(A===999999999){messageon=true;window.setTimeout("cannotinsert('"+N+"')",100)}}}else if((s==="myrtstop"||s==="myrts")&&e.indexOf("toctoc_comments_comments")===-1){var D="like";if(i.indexOf("unlike")>=0){D="unlike"}var P="liketop";if(i.indexOf("unlike")>=0){P="unliketop"}setopacity("tx-tc-myrtstop-dp-"+e,"0.8","toctoc_comments_submit 9");setopacity("tx-tc-myrts-dp-"+e,"0.4","toctoc_comments_submit 10");jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:false,data:"ref="+e+"&rating="+t+"&data="+n+"&check="+r+"&cmd="+D+"&commentsimgs="+o+"&pageid="+pageid,success:function(t){jQuery("#tx-tc-myrts-"+e).html(t)}});setopacity("tx-tc-myrtstop-dp-"+e,"0.4","toctoc_comments_submit 11");jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:true,data:"ref="+e+"&rating="+t+"&data="+n+"&check="+r+"&cmd="+P+"&commentsimgs="+o+"&pageid="+pageid,success:function(t){jQuery("#tx-tc-myrtstop-"+e).html(t);setopacity("tx-tc-myrtstop-dp-"+e,"1","toctoc_comments_submit 12");window.setTimeout("topliketextattachevent('"+e+"')",300)}});m=1;if(e.replace("tx_toctoc_comments_comments_","")!==e){m=0}if(m==1){tttip("t101","#tx-tc-othertitle-"+e+"[title]");tttip("t101","#tx-tc-othertitledis-"+e+"[title]");setucclick("#tx-tc-myrts-dp-"+e+" div div div .tx-tc-picclasslink");tttip("t101","#tx-tc-myrts-dp-"+e+".tx-tc-myrts-disilke img[title]");tttip("t101","#tx-tc-myrts-dp-"+e+".tx-tc-myrts-ilke img[title]");tttip("t201-5","#tx-tc-rts-dp-"+e+" .tx-tc-rts-vote-bar div span[title]");tttip("t201-5","#tx-tc-rts-dp-"+e+" .tx-tc-rts-vote-bar div div[title]");tttip("t201-5","#tx-tc-rts-dp-"+e+" .tx-tc-rts-vote-bar div a[title]");tttip("t101","#tx-tc-othertitle-"+e+"[title]");tttip("t101","#tx-tc-othertitledis-"+e+"[title]");tttip("t101","#tx-tc-myrts-dp-"+e+" .tx-tc-myrts-disilke img[title]");tttip("t101","#tx-tc-myrts-dp-"+e+" .tx-tc-myrts-ilke img[title]");jQuery("#tx-tc-myrts-dp-"+e+" div div a.tx-tc-rts-star-l").on("click",function(){likeclick(this)})}}else{var H="";var B=document.getElementById("tx-tc-scope-"+e);var j=0;j=e;var F="";var I="";if(B){H=B.outerHTML;var q=String(e).split("-");if(q.length>1){j=q[0]}var R=document.getElementById("tx-tc-scope-"+e).parentNode;if(R){savedelemparent=R.outerHTML;if(savedelemparent.indexOf("tx-tc-firstvote")>2){F='<div class="tx-tc-firstvote">';I="</div>"}}var U=document.getElementById("tx-tc-atrts-dp-"+j);if(U){var z=String(U.outerHTML).split('id="tx-tc-scope-').length-1;if(z>2){j=q[0]}var W=document.getElementById("tx-tc-scope-"+j);if(W){z=z-1}}}m=1;if(e.replace("tx_toctoc_comments_comments_","")!==e){m=0}if(i==="vote"){var X=document.getElementById("tx-tc-rts-disp2-"+e)}if(X){setopacity("tx-tc-rts-disp2-"+e,"0.4","toctoc_comments_submit 12.b")}else{setopacity("tx-tc-"+s+"-dp-"+e,"0.4","toctoc_comments_submit 12.a")}var V=document.getElementById("tx-tc-"+s+"-"+e);var $="";var J="";var K="#tx-tc-"+s+"-"+e;if(V){J="<br>"}else{K="#tx-tc-"+s+"-"+j;J="";$=document.getElementById("tx-tc-myrts-"+j).outerHTML;var Q=document.getElementById("tx-tc-atrts-dp-"+j).innerHTML.split("<br><br>");if(Q.length>1){J="<br><br>"}else{Q=document.getElementById("tx-tc-atrts-dp-"+j).innerHTML.split("<br>");if(Q.length>1){J="<br>"}}}jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:false,data:"ref="+e+"&rating="+t+"&data="+n+"&check="+r+"&cmd="+i+"&commentsimgs="+o+"&pageid="+pageid,success:function(t){t=t.replace(' tx-tc-tipemo-2">',' tx-tc-tipemo-2">'+F+H);t=t+I;if($!==""){t=$+J+t+"</div></div></div></div>"}t=t.replace('<div class="tx-tc-overrating">',"");if(X){var n=t.split('<div class="tx-tc-rts-dp">');var r='<div class="tx-tc-rts-dp">'+n[1];r=r.substr(0,r.length-20);jQuery(X).html(r);setopacity("tx-tc-rts-disp2-"+e,"1","toctoc_comments_submit 12.b")}else{jQuery(K).html(t)}}});if(j!==e){var G=document.getElementById("tx-tc-scope-"+j);F="";I="";var Y="";if(G){Y=G.outerHTML;var Z=document.getElementById("tx-tc-scope-"+j).parentNode;if(Z){savedelemparent=Z.outerHTML;if(savedelemparent.indexOf("tx-tc-firstvote")>2){F='<div class="tx-tc-firstvote">';I="</div>"}}}newcheck=r;var et=document.getElementById("tx-tc-rts-dp-"+j);if(et){var tt=et.innerHTML;var nt=String(tt).split("tx-tc-rts-star-v-"+t);var rt=String(nt[1]).split("__"+j+"__");var it=String(rt[1]).split('" href');var st=String(it[0]).split("__");newcheck=String(st[1]);var ot=String(newcheck).split('"');if(ot.length>1){newcheck=ot[0]}if(z>1){t=t+"-"+z}if(newcheck.length>11){setopacity("tx-tc-"+s+"-dp-"+j,"0.4","toctoc_comments_submit 12");jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:true,data:"ref="+j+"&rating="+t+"&data="+n+"&check="+newcheck+"&cmd="+i+"&commentsimgs="+o+"&overall=1"+"&pageid="+pageid,success:function(t){t=t.replace(' tx-tc-tipemo-2">',' tx-tc-tipemo-2">'+F+Y);t=t+I;jQuery("#tx-tc-"+s+"-"+j).html(t);if(m==1){if(j!==e&&j!==0){tttip("t201-5","#tx-tc-rts-dp-"+j+" .tx-tc-rts-vote-bar div span[title]");tttip("t201-5","#tx-tc-rts-dp-"+j+" .tx-tc-rts-vote-bar div div[title]");tttip("t201-5","#tx-tc-rts-dp-"+j+" .tx-tc-rts-vote-bar div a[title]");jQuery("#tx-tc-rts-dp-"+j+" div div div div a.tx-tc-rts-star-v").off("click");jQuery("#tx-tc-rts-dp-"+j+" div div div div a.tx-tc-rts-star-v").on("click",function(){starclick(this)});tttip("t101","#tx-tc-othertitle-"+j+"[title]");tttip("t101","#tx-tc-othertitledis-"+j+"[title]");tttip("t101","#tx-tc-myrts-dp-"+j+" .tx-tc-myrts-disilke img[title]");tttip("t101","#tx-tc-myrts-dp-"+j+" .tx-tc-myrts-ilke img[title]");jQuery("#tx-tc-myrts-dp-"+j+" div div a.tx-tc-rts-star-l").on("click",function(){likeclick(this)})}}}})}}else{newcheck=Math.round((new Date).getTime()/1e3);if(z>1){t=t+"-"+z}jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:true,data:"ref="+j+"&rating="+t+"&data="+n+"&check="+newcheck+"&cmd="+i+"&commentsimgs="+o+"&overall=1"+"&softcheck=1"+"&pageid="+pageid,success:function(e){}})}}if(m==1){tttip("t201-5","#tx-tc-rts-dp-"+e+" .tx-tc-rts-vote-bar div span[title]");tttip("t201-5","#tx-tc-rts-dp-"+e+" .tx-tc-rts-vote-bar div div[title]");tttip("t201-5","#tx-tc-rts-dp-"+e+" .tx-tc-rts-vote-bar div a[title]");jQuery("#tx-tc-rts-dp-"+e+" div div div div a.tx-tc-rts-star-v").on("click",function(){starclick(this)});tttip("t101","#tx-tc-othertitle-"+e+"[title]");tttip("t101","#tx-tc-othertitledis-"+e+"[title]");tttip("t101","#tx-tc-myrts-dp-"+e+" .tx-tc-myrts-disilke img[title]");tttip("t101","#tx-tc-myrts-dp-"+e+" .tx-tc-myrts-ilke img[title]");if(i!=="vote"){topliketextattachevent(e)}else{jQuery("#tx-tc-myrts-dp-"+e+" div div a.tx-tc-rts-star-l").on("click",function(){likeclick(this)})}}else{if(i=="vote"){jQuery("#tx-tc-rts-disp2-"+e+" div div div a.tx-tc-rts-star-v").off("click");jQuery("#tx-tc-rts-disp2-"+e+" div div div a.tx-tc-rts-star-v").on("click",function(){starclick(this)});jQuery("#tx-tc-rts-dp-"+e+" div div div div a.tx-tc-rts-star-v").off("click");jQuery("#tx-tc-rts-dp-"+e+" div div div div a.tx-tc-rts-star-v").on("click",function(){starclick(this)});tttip("t201-5","#tx-tc-rts-dp-"+e+" .tx-tc-rts-vote-bar div span[title]");tttip("t201-5","#tx-tc-rts-dp-"+e+" .tx-tc-rts-vote-bar div div[title]");tttip("t201-5","#tx-tc-rts-dp-"+e+" .tx-tc-rts-vote-bar div a[title]")}jQuery("#tx-tc-myrts-dp-"+e+" div div a.tx-tc-rts-star-l").off("click");jQuery("#tx-tc-myrts-dp-"+e+" div div a.tx-tc-rts-star-l").on("click",function(){likeclick(this)})}setucclick("#tx-tc-myrts-dp-"+e+" div div div .tx-tc-picclasslink")}}function topliketextattachevent(e){jQuery("#tx-tc-myrtstop-dp-"+e+" div a.tx-tc-rts-star-l").on("click",function(){likeclick(this)})}function toctoc_comments_pi1_setUserDatawrap(e){if(e){tccid=e.id;tccid=tccid.replace("tx-tc-setuserdata-","");toctoc_comments_pi1_setUserData(tccid)}}function othertooltip(e){if(e){tccid=e.id;tccid=tccid.replace("tx-tc-othertitle-","");if(e.id.length!==tccid.length){jQuery("#tx-tc-othertitle-"+tccid+"[title]").cooltip({offset:[-1,0],effect:"fade",opacity:1,tipClass:"tx-tc-tooltip"});jQuery("#tx-tc-othertitledis-"+tccid+"[title]").cooltip({offset:[-1,0],effect:"fade",opacity:1,tipClass:"tx-tc-tooltip"})}}}function wtrmrk(e){if(e){tccid=e.id;tccid=tccid.replace("tx-tc-wtrmrk-formf-","");if(e.id.length!==tccid.length){tcidarr=String(tccid).split("__0");jQuery("#toctoc_comments_pi1_"+tcidarr[0]+tcidarr[1]).watermark(utf8_decode(tcb64_dec(tcidarr[2])),{left:0,top:0,fallback:true})}else{tccid=tccid.replace("tx-tc-wtrmrk-tcnt-","");if(e.id.length!==tccid.length){tcidarr=String(tccid).split("__0");jQuery("#"+tctnme+tcidarr[0]).watermark(utf8_decode(tcb64_dec(tcidarr[1])),{left:0,top:0,fallback:true})}}}}function uploadclick(e){if(e){tccid=e.id;tccid=tccid.replace("tx-tc-uploadlink-pic-","");if(e.id.length!==tccid.length){jQuery(".tx-tc-tooltip2").hide();tcOpenFile("toctoc_comments_pi1_"+tccid+"uploadpic","pic")}else{tccid=tccid.replace("tx-tc-uploadlink-pdf-","");if(e.id.length!==tccid.length){jQuery(".tx-tc-tooltip2").hide();tcOpenFile("toctoc_comments_pi1_"+tccid+"uploadpic","pdf")}}}}function bbclick(e,t){if(e){tccid=e.id;tccid=tccid.replace("txtcbb-","");insertbb(tccid,t)}}function ucclick(e){tccid=e.id;tccid=tccid.replace("tx-tc-nameclasslink__","");tcidarr=String(tccid).split("__");tccid=tcidarr[1];if(tcidarr.length===5){show_uc(tcidarr[0],tccid,commentsAjaxData[tccid],tcidarr[2],tcidarr[3],tcidarr[4]);tttip("t101",".tx-tc-ucclose[title]");jQuery(".tx-tc-ucclose").off("click");jQuery(".tx-tc-ucclose").on("click",function(){tccid=this.id;tccid=tccid.replace("tx-tc-cts-uc-cls-","");tttip("hide");toctoc_comments_uc_close(tccid)})}}function likeclick(e){tccid=e.id;tccid=tccid.replace("tx-tc-rts-star-l-","");tcidarr=String(tccid).split("__");tccid=tcidarr[2];tccid2=tcidarr[1];if(tcidarr.length===5){tttip("hide");toctoc_comments_submit(tccid2,tcidarr[0],commentsAjaxData[tccid],tcidarr[3],tcidarr[4],"myrts",commentsAjaxDataC[tccid],tccid);tttip("t101",".tx-tc-myrts-disilke img[title]");tttip("t101",".tx-tc-myrts-ilke img[title]");toctoc_delaytooltip(tccid2)}}function starclick(e){tccid=e.id;tccid=tccid.replace("tx-tc-rts-star-v-","");tcidarr=String(tccid).split("__");tccid=tcidarr[2];tccid2=tcidarr[1];tccid3=tccid2.replace("tx_toctoc_comments_comments_","");if(e.id.length!==tccid.length){tccid3="vote"}else{tccid3="votearticle"}if(tcidarr.length===4){tttip("hide2");toctoc_comments_submit(tccid2,tcidarr[0],commentsAjaxData[tccid],tcidarr[3],tccid3,"rts",commentsAjaxDataC[tccid],tccid)}}function getCursorPos(e){if(e!==null){if("selectionStart"in e&&document.activeElement===e){return{start:e.selectionStart,end:e.selectionEnd}}else if(e.createTextRange){var t=document.selection.createRange();if(t.parentElement()===e){var n=e.createTextRange();n.moveToBookmark(t.getBookmark());for(var r=0;n.compareEndPoints("EndToStart",n)>0;n.moveEnd("character",-1)){r++}n.setEndPoint("StartToStart",e.createTextRange());for(var i={start:0,end:r};n.compareEndPoints("EndToStart",n)>0;n.moveEnd("character",-1)){i.start++;i.end++}return i}}}return-1}function setCursorPos(e,t,n){if(arguments.length<3){n=t}if("selectionStart"in e){setTimeout(function(){e.selectionStart=t;e.selectionEnd=n},1)}else if(e.createTextRange){var r=e.createTextRange();r.moveStart("character",t);r.collapse();r.moveEnd("character",n-t);r.select()}}function toctoc_checkurl(e){var t=arguments[0];var n=arguments[1];var r=arguments[9];var s=arguments[10];var o=arguments[11];var u=getCursorPos(n);if(u.start===null||typeof u.start==="undefined"){}else{this.caretposstart=u.start;this.caretposend=u.end}if(this.caretposend-this.caretposstart>0||o==3){lformcid=arguments[2];selectbb(r,s,lformcid)}var a=arguments[3];if(n!==null){var f=n.value;var l=arguments[2];var c=arguments[4];var h=arguments[5];var p=arguments[6];var d=arguments[7];var v=arguments[8];if(a!==99999){if(f.length>v){document.getElementById(tctnme+l).value=f.substr(0,v)}var m=false;var g="visible";var y="1";var b=document.getElementById("tx-tc-div-submit"+l);var w="";if(f.length>0){if(b){if(b.style.opacity==="0.6"||b.style.opacity===""){w="1"}else{w=b.style.opacity}}}else{if(loginRequiredIdLoginForm===""||global_loggedon===1){m=true}g="hidden";y="0.6";w="0.6";if(b){if(b.style.opacity!=="1"){w=b.style.opacity}}}if(loginRequiredIdLoginForm===""||global_loggedon===1){jQuery("#formhider-"+l).css("opacity",y);jQuery("#tx-tc-div-submit"+l).css("opacity",w)}b=document.getElementById(tcsbmtnme+l);if(b){b.disabled=m}b=document.getElementById("tx-tc-"+l+"uploaddiv");if(b){b.style.visibility=g}if(c!=="jedi"){if(global_loggedon!==1){b=document.getElementById("toctoc_comments_pi1_"+l+"firstname");if(b){b.disabled=m}b=document.getElementById("toctoc_comments_pi1_"+l+"commenttitle");if(b){b.disabled=m}b=document.getElementById("toctoc_comments_pi1_"+l+"lastname");if(b){b.disabled=m}b=document.getElementById("toctoc_comments_pi1_"+l+"homepage");if(b){b.disabled=m}b=document.getElementById("toctoc_comments_pi1_"+l+"location");if(b){b.disabled=m}b=document.getElementById("toctoc_comments_pi1_"+l+"email");if(b){b.disabled=m}b=document.getElementById("toctoc_comments_pi1_"+l+"notify");if(b){b.disabled=m}b=document.getElementById("tx-tc-ct-form-gender"+l);if(b){tttip("t101","#tx-tc-ct-form-gender"+l+" img[title]");b.style.visibility=g}}else{b=document.getElementById("toctoc_comments_pi1_"+l+"commenttitle");if(b){b.disabled=m}}}else{b=document.getElementById("toctoc_comments_pi1_"+l+"from");if(b){b.disabled=m}b=document.getElementById("toctoc_comments_pi1_"+l+"frommail");if(b){b.disabled=m}}var E=document.getElementById("prv-ct-"+l);var S=document.getElementById("tx-tc-div-submit"+l);if(submitopaccontrol===2){if(S){submitopaccontrol=getopacity("tx-tc-div-submit"+l)}}if(f.length>errCommentRequiredLength){if(E){tttip("t101","#prv-ct-"+l+"[title]");jQuery("#prv-ct-"+l).removeClass("tx-tc-nodisp");jQuery("#prv-ct-"+l).addClass("tx-tc-blockdisp")}if(S&&submitopaccontrol===.5){S.style.opacity="1"}}else{if(E){jQuery("#prv-ct-"+l).addClass("tx-tc-nodisp");jQuery("#prv-ct-"+l).removeClass("tx-tc-blockdisp")}if(global_loggedon===0&&tclogincard!==""){S.style.opacity="1"}else{if(S&&submitopaccontrol===.5){S.style.opacity="0.5"}}}}if(typeof emotjicodes!=="undefined"){if(t===32){var x=String(f).split(":");var T=0;if(x.length>1){T=x.length-2}else{if(x.length===1){T=0}}var N=tcdelinefeed(x[T]);if(N.length>0){N=N.toUpperCase();for(i=0;i<emotjicodes.length;i++){if(emotjicodes[i][0]===N){x[T]="::";x[T+1]="";emotjiout=emotjicodes[i][1];f=x.join(":");f=f.replace("::::","");if(a!==99999){document.getElementById(tctnme+l).value=f+emotjiout+" "}else{document.getElementById("toctoc_comments_pi1_contenttextboxc_"+l).value=f+emotjiout+" "}return 0}}}}}if(c!=="jedi"){if(a!==99999){if(previewstartedfp[l]===0){if(t===32){if(previewhtml[l]===""){var C=String(f).split(" ");var k=0;if(C.length>1){k=C.length-2}else{if(C.length===1){k=0}else{return a}}var L=tcdelinefeed(C[k]);if(L.length>8){var A=/(www\.|http:\/\/|https:\/\/)(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;if(A.test(L)){if(L.substr(0,4)==="www."||L.substr(0,4)==="http"){var O=L.split(".");if(O.length>1){if(a===0){a=1;toctoc_previewurl(l,L,a,c,h,p,d)}}}}}}}}}}}return a}function toctoc_settooltip(e){var t=getopacity("tx-tc-myrtstop-dp-"+e);if(parseFloat(t)>.9){tttip("t101","#tx-tc-myrtstop-"+e+" #tx-tc-myrtstop-dp-"+e+" .tx-tc-atrtstop-ilike-dp a[title]");return false}else{window.setTimeout("toctoc_settooltip('"+e+"')",100)}}function toctoc_delaytooltip(e){var t=document.getElementById("tx-tc-myrtstop-dp-"+e);if(t){window.setTimeout("toctoc_settooltip('"+e+"')",200)}}function toctoc_previewurl(e,t,n,r,i,s,o){jQuery("#tx-tc-form-dp-wpp-"+e).css("display","block");jQuery("#tx-tc-form-dp-wpp-"+e).css("min-height","15px");jQuery("#tx-tc-form-dp-wpp-"+e).css("max-height","15px");setopacity(tcsbmtnme+e,"0.4","toctoc_previewurl 1");formhidermoreheightsecondlap=0;document.getElementById("formhider-"+e).style.height="auto";var u=[];u["url"]=tctrim(t);u["lang"]=r;u["commentid"]=previewcountnr[e];u["webpagepreviewheight"]=i;u["configBaseURL"]=utf8_decode(tcb64_dec(configbaseURL));var a=toctoc_comments_pi1_serialize(u);var f=toctoc_comments_pi1_base64_encode(a);jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:false,data:"ref="+e+"&data="+f+"&cmd=getpreviewinit"+"&dataconf="+s+"&dataconfatt="+o+"&previewid=0",success:function(e){}});jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:true,data:"ref="+e+"&data="+f+"&cmd=startpreview"+"&dataconf="+s+"&dataconfatt="+o+"&previewid=0",success:function(t){if(t>0){previewselpreviewid[e]=t}}});jQuery("#tx-tc-"+e+"uploaddiv").css("display","none");window.setTimeout("toctoc_previewurl_fetch('"+e+"', '"+t+"', "+n+", 0, '"+r+"', "+i+", '"+s+"', '"+o+"')",700)}function toctoc_previewurl_fetch(e,t,n,r,i,s,o,u){var a=s;var f=a+200;var l=a+5;var c=a-2;r=r+1;var h=t;var p=[];p["url"]=t;p["lang"]=i;p["commentid"]=previewcountnr[e];p["webpagepreviewheight"]=s;p["configBaseURL"]=utf8_decode(tcb64_dec(configbaseURL));var d=previewstarted[e];if(d!==2){if(r<30){var v=this.toctoc_comments_pi1_serialize(p);var m=this.toctoc_comments_pi1_base64_encode(v);var g=0;jQuery.ajax({type:"POST",url:utf8_decode(tcb64_dec(configbaseURL))+"typo3conf/ext/toctoc_comments/pi1/class.toctoc_comments_webpagepreview_ajax.php",async:true,data:"ref="+e+"&data="+m+"&cmd=getpreview"+"&dataconf="+o+"&dataconfatt="+u+"&previewid=0",success:function(t){g=tctrim(t.substr(8,20));var n=g.indexOf(">");g=g.substr(0,n);if(!tcisInt(g)){g="-1"}else{var i="<div id="+g+"></div>";t=t.replace(i,"")}var s=t.indexOf("tx-tc-pvs-title");var a=t.indexOf("tx-tc-pvs-urltext");if(r>=1&&t.length>150){if(g<4&&(s>2||a>2)){wppelem=document.getElementById("tx-tc-form-dp-wpp-"+e);if(wppelem){if(wppelem.style.maxHeight!==f+"px"){var h=parseInt(document.getElementById("formhider-"+e).offsetHeight)+parseInt(c);document.getElementById("formhider-"+e).style.height="auto";jQuery("#tx-tc-form-dp-wpp-"+e).css("min-height",l+"px");jQuery("#tx-tc-form-dp-wpp-"+e).css("max-height",f+"px");jQuery("#tx-tc-form-dp-wpp-"+e).css("display","block");formhidermoreheightsecondlap=c}}else{document.getElementById("formhider-"+e).style.height="auto";formhidermoreheightsecondlap=c}}}if(g>3){htmlretcodesave=g;d=2;previewstarted[e]=2;jQuery("#tx-tc-form-wpp-"+e).html(t);wppelem=document.getElementById("tx-tc-form-dp-wpp-"+e);if(wppelem){if(document.getElementById("tx-tc-form-dp-wpp-"+e).style.maxHeight!=="0px"){document.getElementById("formhider-"+e).style.height="auto";jQuery("#tx-tc-form-wpp-"+e).html('<img id="tx-tc-form-wpp-working'+e+'" class="tx-tc-working tx-tc-blockdisp" width="16" height="11" align="right" alt="'+utf8_decode(tcb64_dec(textLoading))+'" title="'+utf8_decode(tcb64_dec(textLoading))+'" src="'+utf8_decode(tcb64_dec(configbaseURL))+"typo3conf/ext/toctoc_comments/res/css/themes/"+selectedTheme+'/img/workingslides.gif">');jQuery("#tx-tc-form-dp-wpp-"+e).css("display","none");jQuery("#tx-tc-form-dp-wpp-"+e).css("min-height","0px");jQuery("#tx-tc-form-dp-wpp-"+e).css("max-height","0px");d=2;previewstarted[e]=d;reset_previewvars(e)}}else{document.getElementById("formhider-"+e).style.height="auto";d=2;previewstarted[e]=d;reset_previewvars(e)}setopacity(tcsbmtnme+e,"1","toctoc_previewurl_fetch 1");return true}if(d===2){setopacity(tcsbmtnme+e,"1","toctoc_previewurl_fetch 2");return true}else{jQuery("#tx-tc-form-wpp-"+e).html(t);previewhtml[e]=t}var p=0;var v=0;if(t.indexOf("pvs-images")>2){p=1}if(tctrim(g)==="3"){previewselpic[e]=0}if(tctrim(g)==="2"||tctrim(g)==="3"||previewstarted[e]===2){d=2;if(previewstarted[e]===2){if(previewselpic[e]!==888){v=1;jQuery("#tx-tc-form-wpp-working"+e).css("display","none")}}else{v=1;previewstarted[e]=2}if(p===1&&v===1){jQuery("#tx-tc-cts-pvsprevnext-"+e).css("display","block");jQuery("#tx-tc-cts-pvsprev-"+e).css("display","block");jQuery("#tx-tc-cts-pvsnext-"+e).css("display","block");jQuery("#tx-tc-cts-nopreviewpic-"+e).css("display","block")}jQuery("#tx-tc-cts-pvsfuncs-"+e).css("display","block");jQuery("#tx-tc-cts-pvsnopreview-"+e).css("display","block");previewselpic[e]=change_pvs_pic(e,888,0);var y=document.getElementById("toctoc-comments-pvs-formtext-p"+e);if(y){h=parseInt(document.getElementById("toctoc-comments-pvs-formtext-p"+e).offsetHeight);logomargin="-"+h+"px";jQuery("#tx-tc-pvs-logobg-p"+e).css("margin-top",logomargin);logomargin=""}if(tctrim(g)!=="3"){jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:true,data:"ref="+e+"&data="+m+"&cmd=savepreview"+"&dataconf="+o+"&dataconfatt="+u+"&previewid=0",success:function(t){if(t!==""){if(t>0){previewselpreviewid[e]=t}}}})}else{jQuery("#tx-tc-form-wpp-working"+e).css("display","none")}setopacity(tcsbmtnme+e,"1","toctoc_previewurl_fetch 3")}return true}});window.setTimeout("toctoc_previewurl_fetch('"+e+"', '"+h+"', "+d+", "+r+", '"+i+"', "+s+", '"+o+"', '"+u+"')",1e3)}else{r=0;d=2;previewstarted[e]=d;if(previewhtml[e]==='<img align="right" id="tx-tc-form-wpp-working'+e+'" src="'+utf8_decode(tcb64_dec(configbaseURL))+"typo3conf/ext/toctoc_comments/res/css/themes/"+selectedTheme+'/img/workingslides.gif" width="16" height="11" />'){document.getElementById("formhider-"+e).style.height="auto";jQuery("#tx-tc-form-wpp-"+e).html('<img id="tx-tc-form-wpp-working'+e+'" class="tx-tc-working tx-tc-blockdisp" width="16" height="11" align="right" alt="'+tcb64_dec(textLoading)+'" title="'+tcb64_dec(textLoading)+'" src="'+utf8_decode(tcb64_dec(configbaseURL))+"typo3conf/ext/toctoc_comments/res/css/themes/"+selectedTheme+'/img/workingslides.gif">');jQuery("#tx-tc-form-dp-wpp-"+e).css("display","none");jQuery("#tx-tc-form-dp-wpp-"+e).css("min-height","0px");jQuery("#tx-tc-form-dp-wpp-"+e).css("max-height","0px");setopacity(tcsbmtnme+e,"1","toctoc_previewurl_fetch 4");reset_previewvars(e)}}return true}else{previewstarted[e]=0;if(htmlretcodesave!==0){reset_previewvars(e)}setopacity(tcsbmtnme+e,"1","toctoc_previewurl_fetch 5");htmlretcodesave=0;return true}}function toctoc_previewurl_close(e,t,n,r,i){var s=[];s["cid"]=e;var o=this.toctoc_comments_pi1_serialize(s);var u=this.toctoc_comments_pi1_base64_encode(o);jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:true,data:"ref="+e+"&data="+u+"&cmd=cleanuppreview"+"&dataconf="+r+"&dataconfatt="+i+"&previewid=0",success:function(e){}});document.getElementById("formhider-"+e).style.height="auto";jQuery("#tx-tc-form-wpp-"+e).html('<img id="tx-tc-form-wpp-working'+e+'" class="tx-tc-working tx-tc-blockdisp" width="16" height="11" align="right" alt="'+tcb64_dec(textLoading)+'" title="'+tcb64_dec(textLoading)+'" src="'+utf8_decode(tcb64_dec(configbaseURL))+"typo3conf/ext/toctoc_comments/res/css/themes/"+selectedTheme+'/img/workingslides.gif">');jQuery("#tx-tc-form-dp-wpp-"+e).css("display","none");jQuery("#tx-tc-form-dp-wpp-"+e).css("min-height","0px");jQuery("#tx-tc-form-dp-wpp-"+e).css("max-height","0px");jQuery("#tx-tc-cts-pvsprevnext-"+e).css("display","none");jQuery("#tx-tc-cts-pvsprev-"+e).css("display","none");jQuery("#tx-tc-cts-pvsnext-"+e).css("display","none");jQuery("#tx-tc-cts-nopreviewpic-"+e).css("display","none");jQuery("#tx-tc-cts-pvsfuncs-"+e).css("display","none");jQuery("#tx-tc-cts-pvsnopreview-"+e).css("display","none");setopacity("tx-tc-form-dp-wpp-"+e,"1","toctoc_previewurl_close");jQuery("#tx-tc-"+e+"uploaddiv").css("display","block");reset_previewvars(e);return true}function reset_previewvars(e){previewstarted[e]=0;previewselpic[e]=0;previewhtml[e]="";previewselpreviewid[e]=0;jQuery("#tx-tc-form-wpp-working"+e).on("click",function(){tccid=this.id;tccid=tccid.replace("tx-tc-form-wpp-working","");tccid2=tccid;tcidarr=String(tccid).split("6g9");if(tcidarr.length===3){tccid=tcidarr[0]}toctoc_previewurl_close(tccid2,previewstarted[tccid2],confpvsheight,commentsAjaxData[tccid],commentsAjaxDataAtt[tccid])})}function change_pvs_pic(e,t,n){var r=0;var i=0;do{var s=document.getElementById("pvsimgp"+e+"index"+r);if(s){if(!s.src){i=1001}}else{i=1001}r++;i++}while(i<1e3);r=r-1;if(r===0){n=2}var o=0;if(t===888){if(n===2){o=888}}else{o=t;if(n===1){if(t<r-1){o=t+1;jQuery("#pvsimgp"+e+"index"+t).css("display","none");jQuery("#pvsimgp"+e+"index"+o).css("display","block")}}else{if(t>0){o=t-1;jQuery("#pvsimgp"+e+"index"+t).css("display","none");jQuery("#pvsimgp"+e+"index"+o).css("display","block")}}}return o}function show_pvs_pic(e,t){var n=0;var r=0;do{var i=document.getElementById("pvsimgp"+e+"index"+n);if(i){if(!i.src){r=1001}else{jQuery("#pvsimgp"+e+"index"+n).css("display","none")}}else{r=1001}n++;r++}while(r<1e3);jQuery("#pvsimgp"+e+"index"+t).css("display","block");previewselpic[e]=t;return""}function remove_pvs_pic(e){document.getElementById("toctoc-comments-pvs-formtext-p"+e).style.margin="0px 0px 0px 2px";document.getElementById("pvsimgp"+e+"index"+previewselpic[e]).style.display="none";jQuery("#toctoc_comments-pvs-image-box-p"+e).css("display","none");jQuery("#toctoc_comments-pvs-images-p"+e).css("border-right","none");jQuery("#tx-tc-cts-pvsprevnext-"+e).css("display","none");jQuery("#toctoc-picfoundinfo-p"+e).css("display","none");jQuery("#toctoc_comments-pvs-images-p"+e).css("width","0px");setopacity("toctoc_comments-pvs-image-box-p"+e,"1","remove_pvs_pic");return 888}function setopacity(e,t,n){var r=document.getElementById(e);if(r){r.style.opacity=t;r.style.filter="alpha(opacity="+parseInt(String(100*parseFloat(t)))+")"}else{console.log("element "+e+" does not exist, call triggered by: "+n)}}function getopacity(e){if(document.getElementById(e).style.opacity>=0){var t=document.getElementById(e).style.opacity}else{if(document.getElementById(e).style.filter.indexOf("opacity")>=0){opacityfilter=document.getElementById(e).style.filter;opacityfilterarr=opacityfilter.split("=");opacityfilter=opacityfilterarr[1];opacityfilterarr=opacityfilter.split(")");t=opacityfilterarr[0]}else{t="1";console.log("no opacity found for element: "+e)}}return t}function commentreply(e,t,n,r,i,s){previewselcomment[n]=e;if(i==="triggerform"){jQuery("#tx-tc-ct-report-"+e).css("display","none");jQuery("#tx-tc-ct-ry-fh-"+e).css("display","none");jQuery("#tx-tc-cts-rply-"+e).css("display","block");comment_formhider(e,1,"",0,0,document.getElementById(tctnme+s));previewselcomment[n]=e}else{setopacity("tx-tc-ct-ry-frame-"+n,"0","commentreply");var o=document.getElementById("tx-tc-cts-img-"+e);var u="";if(o){u=document.getElementById("tx-tc-cts-img-"+e).outerHTML;u=u.replace("tx-tc-cts-img-","tx-tc-cts-imgsdw-")}else{u=document.getElemevntById("tx-tc-cts-img-c"+n).outerHTML;u=u.replace("tx-tc-cts-img-c","tx-tc-cts-imgsdw-")}u=u.replace("padding: 0;","margin: 0 8px 0 0;");u=u.replace("width=",'class="tx-tc-ct-ry-img" align="left" width=');u=u.replace("width: 96px; height: 96px;","width: "+confuserpicsize+"px; height: "+confuserpicsize+"px;");txthtml=document.getElementById("tx-tc-ct-box-cttxt-"+e).innerHTML;txthtml=txthtml.replace("tcsroc-","tcsroc-999");txthtml=txthtml.replace("tx-tc-acropped-","tx-tc-acropped-999");txthtml=txthtml.replace("tx-tc-cropped-","tx-tc-cropped-999");var a=document.getElementById("tx-tc-ct-box-cttxt-start-"+e);if(a){txthtml=txthtml+"<br>"+a.innerHTML;txthtml=txthtml.replace("tcsroc-","tcsroc-999");txthtml=txthtml.replace("tx-tc-acropped-","tx-tc-acropped-999");txthtml=txthtml.replace("tx-tc-cropped-","tx-tc-cropped-999")}document.getElementById("tx-tc-ct-rybox-"+n).innerHTML=u+txthtml;jQuery("#tx-tc-ct-rybox-title-"+n).css("display","block");jQuery("#tx-tc-ct-rybox-"+n).css("display","block");jQuery("#tx-tc-cts-cocfuncs-"+n).addClass("tx-tc-blockdisp");jQuery("#tx-tc-cts-cocfuncs-"+n).removeClass("tx-tc-nodisp");jQuery("#tx-tc-cts-nococ-"+n).addClass("tx-tc-blockdisp");jQuery("#tx-tc-cts-nococ-"+n).removeClass("tx-tc-nodisp");jQuery("#tx-tc-ct-ry-frame-"+n).css("display","block");comment_formhider(n,1,"",0,0,document.getElementById(tctnme+n));previewselcomment[n]=e;toctoc_comments_fadein("tx-tc-ct-ry-frame-"+n)}}function toctoc_coc_close(e){previewselcomment[e]=0;if(toctoc_comments_fadeout("tx-tc-ct-ry-frame-"+e)===true){document.getElementById("tx-tc-ct-ry-frame-"+e).style.display="none";jQuery("#tx-tc-ct-rybox-"+e).css("display","none");jQuery("#tx-tc-ct-rybox-"+e).html="";jQuery("#tx-tc-ct-rybox-"+e).css("display","none");jQuery("#tx-tc-ct-rybox-title-"+e).css("display","none");jQuery("#tx-tc-cts-cocfuncs-"+e).removeClass("tx-tc-blockdisp");jQuery("#tx-tc-cts-cocfuncs-"+e).addClass("tx-tc-nodisp");jQuery("#tx-tc-cts-nococ-"+e).removeClass("tx-tc-blockdisp");jQuery("#tx-tc-cts-nococ-"+e).addClass("tx-tc-nodisp")}}function changedefuserpic(e,t){(function(n){if(e==="0"){n("#toctoc_comments_pi1_"+t+"gender").val("0");n("#tx-toctoc-comments-comments-img-gender-0-"+t).removeClass("tx-tc-opa40");n("#tx-toctoc-comments-comments-img-gender-0-"+t).addClass("tx-tc-opa1");n("#tx-toctoc-comments-comments-img-gender-1-"+t).removeClass("tx-tc-opa1");n("#tx-toctoc-comments-comments-img-gender-1-"+t).addClass("tx-tc-opa40")}else{n("#toctoc_comments_pi1_"+t+"gender").val("1");n("#tx-toctoc-comments-comments-img-gender-0-"+t).removeClass("tx-tc-opa1");n("#tx-toctoc-comments-comments-img-gender-0-"+t).addClass("tx-tc-opa40");n("#tx-toctoc-comments-comments-img-gender-1-"+t).removeClass("tx-tc-opa40");n("#tx-toctoc-comments-comments-img-gender-1-"+t).addClass("tx-tc-opa1")}})(jQuery)}function previewct(e,t,n){if(n===0){setopacity("tx-tc-cts-prv-ct-dp-"+t,"0.4","previewct_off");tttip("hide");if(toctoc_comments_fadeout("tx-tc-cts-prv-ct-"+t)===true){t=0}}else{var r=[];setopacity("tx-tc-cts-prv-ct-dp-"+t,"0.6","previewct");jQuery("#tx-tc-cts-prv-ct-dp-"+t).removeClass("tx-tc-nodisp");jQuery("#tx-tc-cts-prv-ct-dp-"+t).addClass("tx-tc-blockdisp");var i=document.getElementById(tctnme+t);var s=i.value;s=s.replace(/\t/g,"");s=s.split(">").join("&gt;");s=s.split("<").join("&lt;");s=tctrim(s);s=dbize_emojis(s);r["cmd"]="preview";r["content"]=this.toctoc_comments_pi1_base64_encode(s);var o=this.toctoc_comments_pi1_serialize(r);var u=this.toctoc_comments_pi1_base64_encode(o);jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:false,data:"cmd=previewcomment&data="+u+"&dataconf="+e,success:function(e){jQuery("#tx-tc-cts-prv-content-"+t).html(e);jQuery("#tx-tc-cts-prv-content-"+t).removeClass("tx-tc-nodisp");jQuery("#tx-tc-cts-prv-ct-"+t).removeClass("tx-tc-nodisp");jQuery("#tx-tc-cts-div-ct-prv-"+t).removeClass("tx-tc-nodisp");jQuery("#tx-tc-cts-img-prv-ct-"+t).removeClass("tx-tc-nodisp");jQuery("#tx-tc-cts-prv-content-"+t).addClass("tx-tc-blockdisp");jQuery("#tx-tc-cts-prv-ct-"+t).addClass("tx-tc-blockdisp");jQuery("#tx-tc-cts-div-ct-prv-"+t).addClass("tx-tc-blockdisp");jQuery("tx-tc-cts-img-prv-ct-"+t).addClass("tx-tc-blockdisp");setopacity("tx-tc-cts-prv-ct-"+t,"1","previewct_success")}});setopacity("tx-tc-cts-prv-ct-dp-"+t,"1","previewct");jQuery("#tx-tc-cts-prv-ct-dp-"+t).removeClass("tx-tc-nodisp");jQuery("#tx-tc-cts-prv-ct-dp-"+t).addClass("tx-tc-blockdisp");tttip("t101","#prv-ct-"+t+"[title]");tttip("t101","#tx-tc-cts-img-prv-ct-"+t+"[title]");tttip("temo","#tx-tc-cts-prv-content-"+t+" img[title]");tttip("temo","#tx-tc-cts-prv-content-"+t+" .emoji[title]")}}function recentct(e,t,n,r){if(e===1){setopacity("tx-tc-trt-cts-article-"+t,"0.6","recentct toprating")}else{setopacity("tx-tc-recent-cts-article-"+t,"0.6","recentct")}jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:false,data:"cmd=rcclearcache&pid="+n,success:function(e){window.location.href=r}})}function savect(e,t,n){var r=document.getElementById("toctoc_comments_pi1_contenttextboxc_"+e).value;r=r.replace(/\t/g,"");r=r.split(">").join("&gt;");r=r.split("<").join("&lt;");r=tctrim(r);r=dbize_emojis(r);var i=[];i["cmd"]="savect";i["content"]=this.toctoc_comments_pi1_base64_encode(r);r=this.toctoc_comments_pi1_serialize(i);var s=this.toctoc_comments_pi1_base64_encode(r);var o=commentsAjaxData[t];var u=commentsAjaxThisData[t];var a=commentsAjaxDataC[t];var f="cts-ct";setopacity("tx-tc-"+f+"-dp-tx-tc-cts_"+e,"0.4","savect");tttip("hide");jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:false,data:"data="+o+"&datac="+a+"&datathis="+u+"&cuid="+e+"&pid="+n+"&cid="+t+"&content="+s+"&cmd=updatect",success:function(t){if(edithtmlkit!==""){editsavenamehtml=edithtmlkit+"<br />"}else{if(confuseNameCommentSeparator==1){editsavenamehtml=editsavenamehtml+" "+utf8_decode(tcb64_dec(textnameCommentSeparator))+"&nbsp;"}else{editsavenamehtml=editsavenamehtml+""}}editsavenamehtml=editsavenamehtml+commenttitletitlehtml;var n=document.getElementById("tx-tc-ct-box-cttxt-start-"+e);if(n){jQuery("#tx-tc-ct-box-cttxt-start-"+e).html(commenttitletitlehtml+t);if(n.style.display!==""){n.style.display=""}var r=document.getElementById("tx-tc-ct-box-cttxt-"+e).innerHTML.split("<form class");document.getElementById("tx-tc-ct-box-cttxt-"+e).innerHTML=r[0]}else{jQuery("#tx-tc-ct-box-cttxt-"+e).html(editsavenamehtml+t)}commenttitletitlehtml="";if(edithtmlkit!==""){edithtmlkit=""}editsavebthtml=editsavebthtml.replace("span class",'span title="'+utf8_decode(tcb64_dec(textEditComment))+'" class');document.getElementById("edf"+e).outerHTML=editsavebthtml;document.getElementById("savef"+e).outerHTML="";var i=document.getElementById("tx-tc-ct-ry-rl-"+e);if(i){if(i.style.display!==""){i.style.display=""}}i=document.getElementById("tx-tc-rts-dp-tx_toctoc_comments_comments_"+e);if(i){i.style.display=""}i=document.getElementById("tx-tc-myrts-dp-tx_toctoc_comments_comments_"+e);if(i){i.style.display=""}i=document.getElementById("tx-tc-rts-disp2-tx_toctoc_comments_comments_"+e);if(i){i.style.display=""}i=document.getElementById("txtcnamepart"+e);if(i){i.style.display=""}i=document.getElementById("tx-tc-ct-box-cttxt-start-"+e);if(i){if(i.style.display!==""){i.style.display=""}}if(n){window.setTimeout("tcrebind('#tx-tc-ct-box-cttxt-start-"+e+"', 'savect-cttxt-start')",100)}else{window.setTimeout("tcrebind('#tx-tc-ct-box-cttxt-"+e+"', 'savect-cttxt')",100)}window.setTimeout("rebindediticon('#edf"+e+" ')",40);edituid=0;editon=false}});var l=document.getElementById("df"+e);if(l){l.style.display=""}editsavenamehtml="";edithtmlkit="";setopacity("tx-tc-"+f+"-dp-tx-tc-cts_"+e,"1","savect")}function rebindediticon(e){(function(t){t(e+".tx-tc-ct-editbutton").on("click",function(){tccid=this.id;tccid=tccid.replace("toctoc_comments_pi1_submitedit_uid","");tccid2=tccid;tttip("hide");if(this.id.length!==tccid.length){tcidarr=String(tccid).split("__0");if(tcidarr.length>1){tccid=tcidarr[0]}editct(tcidarr[0],tcidarr[1],tcidarr[2],1,this.id);tttip("t101","#"+this.id+"[title]")}t(e+".tx-tc-ct-ceditbutton").on("click",function(){tccid=this.id;tccid=tccid.replace("toctoc_comments_pi1_submitedit_uid","");tttip("hide");if(this.id.length!==tccid.length){tcidarr=String(tccid).split("__0");if(tcidarr.length>1){tccid=tcidarr[0]}editct(tcidarr[0],tcidarr[1],tcidarr[2],0,this.id);tttip("t101","#"+this.id+"[title]")}});window.setTimeout("setsavecteventdelayed('.tx-tc-ct-savebutton')",50)})})(jQuery)}function setsavecteventdelayed(e){(function(t){t(e).on("click",function(){tccid=this.id;tccid=tccid.replace("toctoc_comments_pi1_submitsave_uid","");tttip("hide");if(this.id.length!==tccid.length){tcidarr=String(tccid).split("__0");if(tcidarr.length>1){tccid=tcidarr[0]}var e="toctoc_comments_pi1_contenttextboxc_"+tcidarr[0]+"";if(commentform_validate(e,tcidarr[1])){savect(tcidarr[0],tcidarr[1],tcidarr[2]);tttip("t101","#"+this.id+"[title]")}}})})(jQuery)}function editct(e,t,n,r,s){var o=document.getElementById("dnf"+e);var u=document.getElementById("tx-tc-ct-box-cttxt-start-"+e);var a=document.getElementById("tx-tc-ct-ry-rl-"+e);if(r===0){document.getElementById("tx-tc-ct-box-cttxt-"+e).outerHTML=editsavehtml;document.getElementById("edf"+e).outerHTML=editsavebthtml;document.getElementById("savef"+e).outerHTML="";var f=document.getElementById("df"+e);if(f){f.style.display=""}f=document.getElementById("tx-tc-rts-dp-tx_toctoc_comments_comments_"+e);if(f){f.style.display=""}f=document.getElementById("tx-tc-myrts-dp-tx_toctoc_comments_comments_"+e);if(f){f.style.display=""}f=document.getElementById("txtcnamepart"+e);if(f){f.style.display=""}f=document.getElementById("tx-tc-rts-disp2-tx_toctoc_comments_comments_"+e);if(f){f.style.display=""}if(o){o.style.display=""}if(u){if(u.style.display!==""){u.style.display=""}}if(a){if(a.style.display!==""){a.style.display=""}}tttip("hide");a=document.getElementById(s);if(a){var l=a.outerHTML;l=l.replace("span class",'span title="'+utf8_decode(tcb64_dec(textEditComment))+'" class');a.outerHTML=l}rebindediticon("#"+s);tttip("t101","#"+s+"[title]");jQuery("#tx-tc-tcsroc-"+e).on("click",function(){tccid=this.id;tccid=tccid.replace("tx-tc-tcsroc-","");if(tccid!=this.id){jQuery("#tx-tc-acropped-"+tccid+" .tx-tc-tooltip").hide();tcsroc(tccid)}});editon=false;edituid=0;editsavehtml="";commenttitletitlehtml=""}else{if(editon===false){editon=true;edituid=e;a=document.getElementById("df"+e);if(a){a.style.display="none"}a=document.getElementById("tx-tc-rts-dp-tx_toctoc_comments_comments_"+e);if(a){a.style.display="none"}a=document.getElementById("tx-tc-commenttitle-"+e);if(a){commenttitletitlehtml=a.outerHTML}a=document.getElementById("txtcnamepart"+e);if(a){a.style.display="none"}a=document.getElementById("tx-tc-myrts-dp-tx_toctoc_comments_comments_"+e);if(a){a.style.display="none"}a=document.getElementById("tx-tc-rts-disp2-tx_toctoc_comments_comments_"+e);if(a){a.style.display="none"}if(o){o.style.display="none"}editsavehtml=document.getElementById("tx-tc-ct-box-cttxt-"+e).outerHTML;if(acroppeds[e]){edithtml=acroppeds[e]}else{edithtml=document.getElementById("tx-tc-ct-box-cttxt-"+e).innerHTML}if(u){edithtml="<b>Firstname</b>&nbsp;<b>Lastname</b> - "+u.innerHTML;document.getElementById("tx-tc-ct-box-cttxt-start-"+e).style.display="none"}var c=edithtml.split("tx-tc-overrating-date");if(c.length>1){var h=edithtml.split("</span><br>");edithtmlkit=h[0]+"</span>";if(h[1]){edithtml="<b>Firstname</b>&nbsp;<b>Lastname</b> - "+h[1]}}editsavebthtml=document.getElementById("edf"+e).outerHTML;var p="";edithtml=edithtml.replace(commenttitletitlehtml,"");edithtml=edithtml.replace(/<br \/>/g,"\r");edithtml=edithtml.replace(/<br>/g,"\r");a=document.getElementById("tx-tc-acropped-"+e);if(a){var d=edithtml.split("tx-tc-acropped-");if(d.length>1){var v=d[1].split("</span>");edithtmloutarrayspanparttwo=v[1].split(">");edithtmloutarrayspanparttwo.splice(0,1);v[1]=edithtmloutarrayspanparttwo.join(">");v.splice(0,1);d[1]=v.join("</span>");d[1]=d[1].substr(1,d[1].length-8);edithtml=d.join("");edithtml=edithtml.replace('<span class="tx-tc-inlinedisp" id="',"");edithtml=edithtml.replace('<span class="tx-tc-nodisp" id="',"");edithtml=edithtml.replace('/span><span id="tx-tc-cropped-'+e+'" class="tx-tc-nodisp">'," ");edithtml=edithtml.replace('<span style="display: none;" class="tx-tc-inlinedisp" id="/span><span style="display: inline;" id="tx-tc-cropped-'+e+'" class="tx-tc-nodisp">'," ")}}var m=edithtml.split(" "+utf8_decode(tcb64_dec(textnameCommentSeparator))+"&nbsp;");if(m.length>1){editsavenamehtml=tctrim(m[0])+" ";p=tctrim(m[1]);for(i=2;i<m.length;i++){p+=" "+utf8_decode(tcb64_dec(textnameCommentSeparator))+"&nbsp;"+m[i]}}else{p=edithtml.replace("<b>Firstname</b>&nbsp;<b>Lastname</b> - ","")}var g="";var y=p.split("<img");if(y.length<=1){g=p}else{for(i=0;i<y.length;i++){smilieSubArray=y[i].split('alt="');if(smilieSubArray.length>1){thesmile=smilieSubArray[1].substr(0,smilieSubArray[1].indexOf('"'));theendtad=smilieSubArray[1].substr(0,smilieSubArray[1].indexOf(">"));smilieSubArrayrest=smilieSubArray[1].substr(smilieSubArray[1].indexOf(">")+1);g+=thesmile+smilieSubArrayrest}else{g+=y[i]}}}edithtmlouturl="";var b=g.split("</a>");if(b.length<=1){edithtmlouturl=g}else{for(i=0;i<b.length;i++){urlSubArray=b[i].split("<a");if(urlSubArray.length>1){hastag=urlSubArray[0].indexOf("tx-tc-external-autolink");if(hastag>0){edithtmlouturl+=urlSubArray[0].substr(urlSubArray[0].indexOf(">")+1)}else{edithtmlouturl+=urlSubArray[0]}hastag=urlSubArray[1].indexOf("tx-tc-external-autolink");if(hastag>0){edithtmlouturl+=urlSubArray[1].substr(urlSubArray[1].indexOf(">")+1)}else{edithtmlouturl+=urlSubArray[1]}}else{edithtmlouturl+=b[i]}}}edithtmloutbb=edithtmlouturl;for(i=0;i<BBs.length;i++){edithtmloutbb=edithtmloutbb.split("</"+BBs[i]+">").join("[/"+BBsBBs[i]+"]");edithtmloutbb=edithtmloutbb.split("<"+BBs[i]+">").join("["+BBsBBs[i]+"]")}for(i=0;i<BBs.length;i++){edithtmloutbb=edithtmloutbb.replace("[/"+BBsBBs[i]+"]  ["+BBsBBs[i]+"]","")}var w="";var E=edithtmloutbb.split("\r");if(E.length<=1){E=edithtmloutbb.split("\n")}if(E.length>1){edithtmloutbb=E.join("-@#@-")}var S=edithtmloutbb.split('<span title="');if(S.length>1){for(i=0;i<S.length;i++){edithtmloutemoarr2=S[i].split('" class="emoji emoji');if(edithtmloutemoarr2.length>1){edithtmloutemoarr2[0]=""}S[i]=edithtmloutemoarr2.join("")}}if(S.length>1){for(i=0;i<S.length;i++){edithtmloutemoarr2=[];edithtmloutemoarr2=S[i].split('"></span>');if(edithtmloutemoarr2.length>1){edithtmloutemoarr3=[];edithtmloutemoarr3=edithtmloutemoarr2[0].split(" ");if(edithtmloutemoarr3.length>1){if(edithtmloutemoarr3[1].length>9){w="%"+edithtmloutemoarr3[1].replace(/-/g,"%");edithtmloutemoarr2[0]=w}else{if(edithtmloutemoarr3[1].length>5){w=edithtmloutemoarr3[1].replace(/-/g,"%");w=w.substr(1);edithtmloutemoarr2[0]=w}else{if(edithtmloutemoarr3[1].length>1){w=edithtmloutemoarr3[1].replace(/-/g,"%");w="%"+w;edithtmloutemoarr2[0]=w}}}}S[i]=edithtmloutemoarr2.join("")}}edithtmloutbb=S.join("");edithtmloutbb=unescape(edithtmloutbb)}edithtmloutbb=tctrim(edithtmloutbb.split("-@#@-").join("\r"));if(edithtmloutbb.substr(0,4)=="&nbs"){if(confuseNameCommentSeparator==1){edithtmloutbb=edithtmloutbb.substr(6)}}outhtml='<form class="tx-tc-form-for-newcomment"';outhtml+='><fieldset class="tx-tc-ct-fieldset"><textarea id="toctoc_comments_pi1_contenttextboxc_'+e+'" class="tx-tc-ctinput-textarea" ';outhtml+='onfocus="jQuery(';outhtml+="'#toctoc_comments_pi1_contenttextboxc_"+e+"').elastic();";outhtml+='" onblur="';outhtml+="jQuery('#toctoc_comments_pi1_contenttextboxc_"+e+"').elastic();";outhtml+="jQuery('#toctoc_comments_pi1_contenttextboxc_"+e+"').autoGrow();";outhtml+='" style="overflow: hidden; height: 20px; font-size: 100%;" cols="42" autocomplete="off">'+edithtmloutbb+"</textarea></fieldset></form>";a=document.getElementById("tx-tc-ct-ry-rl-"+e);if(a){if(a.style.display!=="none"){a.style.display="none";}}jQuery("#"+s).removeClass("tx-tc-ct-editbutton");jQuery("#"+s).addClass("tx-tc-ct-ceditbutton");var x=document.getElementById(s).outerHTML;x=x.replace("editcommentfe","ceditcommentfe");x=x.replace("span class",'span title="'+utf8_decode(tcb64_dec(textCancelEditComment))+'" class');savebthtml=editsavebthtml;savebthtml=savebthtml.replace("tx-tc-ct-ceditbutton","tx-tc-ct-savebutton");savebthtml=savebthtml.replace("span class",'span title="'+utf8_decode(tcb64_dec(textSaveComment))+'" class');strnewfunc=t+"__0"+e+"__0"+t+"__0"+n;savebthtml=savebthtml.replace(e+"__0"+t+"__0"+n+"__0"+s,strnewfunc);savebthtml=savebthtml.replace('id="edf','id="savef');savebthtml=savebthtml.replace('class="tx-tc-ct-editfo','class="tx-tc-ct-savefo');savebthtml=savebthtml.replace("toctoc_comments_pi1_submitedit_uid","toctoc_comments_pi1_submitsave_uid");document.getElementById("edf"+e).outerHTML=editsavebthtml+savebthtml;jQuery("#"+s.replace("toctoc_comments_pi1_submitedit_uid","toctoc_comments_pi1_submitsave_uid")).removeClass("tx-tc-ct-editbutton");jQuery("#"+s.replace("toctoc_comments_pi1_submitedit_uid","toctoc_comments_pi1_submitsave_uid")).addClass("tx-tc-ct-savebutton");if(confuseEmoji>0){tapadding=22+Math.round(Math.round(boxmodelSpacing)/2);smilieselectorttooltip=' title="'+utf8_decode(tcb64_dec(textAddemoji))+'"';smilieselectorhtml='<div id="tx-tc-smilie-iconlink-'+t+"6g9"+e+"6g9"+'"><div class="tx-tc-smilie-icon" id="tx-tc-smilie-icon-'+t+"6g9"+e+"6g9"+'" '+smilieselectorttooltip+'></div></div><div class="tx-tc-smilie-popup" id="tx-tc-smilie-popup-'+t+"6g9"+e+"6g9"+'"></div>';outhtml=outhtml.replace("</textarea>","</textarea>"+smilieselectorhtml)}outhtml=outhtml.replace(/\t/g,"");if(edithtmlkit!==""){outhtml=edithtmlkit+outhtml;outhtml=outhtml.replace('class="tx-tc-form-for-newcomment"','class="tx-tc-form-for-newcomment" style="margin: 0 16px 0 0"')}if(u){outhtml=outhtml.replace('class="tx-tc-form-for-newcomment"','class="tx-tc-form-for-newcomment" style="margin: 0 16px 0 0"');document.getElementById("tx-tc-ct-box-cttxt-"+e).innerHTML+=outhtml}else{outhtml=outhtml.replace('class="tx-tc-form-for-newcomment"','class="tx-tc-form-for-newcomment" style="margin: 0 16px 0 0"');document.getElementById("tx-tc-ct-box-cttxt-"+e).innerHTML=outhtml}document.getElementById(s).outerHTML=x;jQuery("#tx-tc-ct-box-cttxt-"+e).on("keyup click",function(t){var n=99999;toctoc_checkurl(t.keyCode,document.getElementById("toctoc_comments_pi1_contenttextboxc_"+e),e,n,activelang,confpvsheight,commentsAjaxData[e],commentsAjaxDataAtt[e],maxCommentLength,t.pageX,t.pageY,t.which)});document.getElementById("toctoc_comments_pi1_contenttextboxc_"+e).focus();rebindediticon("#"+s.replace("toctoc_comments_pi1_submitedit_uid","toctoc_comments_pi1_submitsave_uid"));tttip("t101","#"+s+"[title]");tttip("t101","#"+s.replace("toctoc_comments_pi1_submitedit_uid","toctoc_comments_pi1_submitsave_uid")+"[title]");tcrebindemo("#tx-tc-ct-box-cttxt-"+e)}}}function jtctrvw(e){(function(t){tcnum=1;var n=1;if(e.parentNode){if(e.parentNode.id){tccid=e.parentNode.id;tccid=tccid.replace("tctrvw__","");if(tccid!=e.parentNode.id){n=0;tcidarr=String(tccid).split("__");tccid3=tcidarr[2].replace("@","");tccid2=tcidarr[3].replace("@","");t(".tx-tc-tooltip").hide();tctrvw(tcidarr[0],tcidarr[1],tccid3,tccid2);tcnum=0}}}if(n===1){tccid=e.firstChild.id;tccid=tccid.replace("tctrvw__","");tccid=tccid.replace("__nbcl","");if(tccid!=e.firstChild.id){tcidarr=String(tccid).split("__");tccid3=tcidarr[2].replace("@","");tccid2=tcidarr[3].replace("@","");t(".tx-tc-tooltip").hide();tctrvw(tcidarr[0],tcidarr[1],tccid3,tccid2);tcnum=0}}if(tcnum===1){if(e.id){tccid=e.id;tccid=tccid.replace("tctrvw__","");if(tccid!=e.id){tcidarr=String(tccid).split("__");tccid3=tcidarr[2].replace("@"," ");tccid2=tcidarr[3].replace("@"," ");t(".tx-tc-tooltip").hide();tctrvw(tcidarr[0],tcidarr[1],tccid3,tccid2)}}}})(jQuery)}function tctrvw(e,t,n,r){(function(s){r=r.replace(/@/g,"");var o=r.split("rr");var u=n.split("rr");var a="";if(parseInt(e)===0){for(i=0;i<u.length;i++){if(tcisInt(u[i])){u[i]=tctrim(u[i]);document.getElementById("tx-tc-cts-ct-tx-tc-cts_"+u[i]).style.display="table";tctreestate[u[i]]=e;if(!array_key_exists(t,tcelemstate)){tcelemstate[t]=[];tcelemstate[t][u[i]]=[]}if(!array_key_exists(u[i],tcelemstate[t])){tcelemstate[t][u[i]]=[]}tcelemstate[t][u[i]]["visible"]=1;elemicon=document.getElementById("tx-tc-cts-img-exp-1-"+u[i]);if(elemicon){a=document.getElementById("tx-tc-cts-explink-"+u[i]).innerHTML;if(tcelemstate[t][u[i]]["expanded"]===1){document.getElementById("tx-tc-cts-img-exp-1-"+u[i]).style.display="block";document.getElementById("tx-tc-cts-img-exp-0-"+u[i]).style.display="none";a=a.replace('"tx-tc-lnkexp-2','"tx-tc-lnkexp');document.getElementById("tx-tc-cts-explink-"+u[i]).innerHTML=a.replace("tctrvw__0","tctrvw__1")}else{document.getElementById("tx-tc-cts-img-exp-1-"+u[i]).style.display="none";document.getElementById("tx-tc-cts-img-exp-0-"+u[i]).style.display="block";tcelemstate[t][u[i]]["expanded"]=0;a=a.replace('"tx-tc-lnkexp','"tx-tc-lnkexp-2');document.getElementById("tx-tc-cts-explink-"+u[i]).innerHTML=a.replace("tctrvw__1","tctrvw__0")}}else{tcelemstate[t][u[i]]["expanded"]=2}}}for(i=1;i<o.length;i++){o[i]=tctrim(o[i]);if(tcisInt(tctrim(o[i]))){if(!array_key_exists(t,tcelemstate)){tcelemstate[t]=[];tcelemstate[t][o[i]]=[]}if(!array_key_exists(o[i],tcelemstate[t])){tcelemstate[t][o[i]]=[]}if(tcelemstate[t][o[i]]["visible"]===1){document.getElementById("tx-tc-cts-ct-tx-tc-cts_"+o[i]).style.display="table"}else{document.getElementById("tx-tc-cts-ct-tx-tc-cts_"+o[i]).style.display="none";tcelemstate[t][o[i]]["visible"]=0}elemicon=document.getElementById("tx-tc-cts-img-exp-1-"+o[i]);if(elemicon){a=document.getElementById("tx-tc-cts-explink-"+o[i]).innerHTML;if(tcelemstate[t][o[i]]["expanded"]===1){document.getElementById("tx-tc-cts-img-exp-1-"+o[i]).style.display="block";document.getElementById("tx-tc-cts-img-exp-0-"+o[i]).style.display="none";a=a.replace('"tx-tc-lnkexp-2','"tx-tc-lnkexp');document.getElementById("tx-tc-cts-explink-"+o[i]).innerHTML=a.replace("tctrvw__0","tctrvw__1")}else{document.getElementById("tx-tc-cts-img-exp-1-"+o[i]).style.display="none";document.getElementById("tx-tc-cts-img-exp-0-"+o[i]).style.display="block";tcelemstate[t][o[i]]["expanded"]=0;a=a.replace('"tx-tc-lnkexp','"tx-tc-lnkexp-2');document.getElementById("tx-tc-cts-explink-"+o[i]).innerHTML=a.replace("tctrvw__1","tctrvw__0")}}else{tcelemstate[t][o[i]]["expanded"]=2}}}linkelem=document.getElementById("tx-tc-cts-explink-"+t);if(linkelem){a=linkelem.innerHTML}document.getElementById("tx-tc-cts-img-exp-0-"+t).style.display="none";document.getElementById("tx-tc-cts-img-exp-1-"+t).style.display="block";if(linkelem){a=a.replace('"tx-tc-lnkexp-2','"tx-tc-lnkexp');document.getElementById("tx-tc-cts-explink-"+t).innerHTML=a.replace("tctrvw__0","tctrvw__1")}}else{for(i=0;i<u.length;i++){u[i]=tctrim(u[i]);if(tcisInt(u[i])){document.getElementById("tx-tc-cts-ct-tx-tc-cts_"+u[i]).style.display="none";tctreestate[u[i]]=e;if(!array_key_exists(t,tcelemstate)){tcelemstate[t]=[];tcelemstate[t][u[i]]=[]}if(!array_key_exists(u[i],tcelemstate[t])){tcelemstate[t][u[i]]=[]}tcelemstate[t][u[i]]["visible"]=0;elemicon=document.getElementById("tx-tc-cts-img-exp-1-"+u[i]);if(elemicon){if(document.getElementById("tx-tc-cts-img-exp-1-"+u[i]).style.display==="block"||s("#tx-tc-cts-img-exp-1-"+u[i]).hasClass("tx-tc-blockdisp")&&document.getElementById("tx-tc-cts-img-exp-1-"+u[i]).style.display==""){tcelemstate[t][u[i]]["expanded"]=1}else{tcelemstate[t][u[i]]["expanded"]=0}}else{tcelemstate[t][u[i]]["expanded"]=2}}}for(i=1;i<o.length;i++){o[i]=tctrim(o[i]);if(tcisInt(o[i])){if(!array_key_exists(t,tcelemstate)){tcelemstate[t]=[];tcelemstate[t][o[i]]=[]}if(!array_key_exists(o[i],tcelemstate[t])){tcelemstate[t][o[i]]=[]}if(document.getElementById("tx-tc-cts-ct-tx-tc-cts_"+o[i]).style.display==="table"||!s("#tx-tc-cts-ct-tx-tc-cts_"+o[i]).hasClass("tx-tc-nodisp")&&document.getElementById("tx-tc-cts-ct-tx-tc-cts_"+o[i]).style.display==""){tctreestate[o[i]]=0;tcelemstate[t][o[i]]["visible"]=1}else{tctreestate[o[i]]=1;tcelemstate[t][o[i]]["visible"]=0}elemicon=document.getElementById("tx-tc-cts-img-exp-1-"+o[i]);if(elemicon){if(document.getElementById("tx-tc-cts-img-exp-1-"+o[i]).style.display==="block"||!s("#tx-tc-cts-img-exp-1-"+o[i]).hasClass("tx-tc-nodisp")&&document.getElementById("tx-tc-cts-img-exp-1-"+o[i]).style.display==""){tcelemstate[t][o[i]]["expanded"]=1}else{tcelemstate[t][o[i]]["expanded"]=0}}else{tcelemstate[t][o[i]]["expanded"]=2}document.getElementById("tx-tc-cts-ct-tx-tc-cts_"+o[i]).style.display="none"}}linkelem=document.getElementById("tx-tc-cts-explink-"+t);if(linkelem){a=linkelem.innerHTML}document.getElementById("tx-tc-cts-img-exp-1-"+t).style.display="none";document.getElementById("tx-tc-cts-img-exp-0-"+t).style.display="block";if(linkelem){a=a.replace('"tx-tc-lnkexp','"tx-tc-lnkexp-2');document.getElementById("tx-tc-cts-explink-"+t).innerHTML=a.replace("tctrvw__1","tctrvw__0")}}})(jQuery)}function tcsroc(e){document.getElementById("tx-tc-cropped-"+e).style.display="inline";document.getElementById("tx-tc-acropped-"+e).style.display="none";var t=document.getElementById("tx-tc-ct-box-cttxt-"+e).innerHTML;acroppeds[e]=t;for(i=0;i<BBs.length;i++){if(t.replace('" class="tx-tc-nodisp"><'+BBs[i]+">","")!=t&&t.replace("</"+BBs[i]+'> <span style="display: none;" class="tx-tc-inlinedisp" id="tx-tc-acropped',"")!=t){t=t.replace('" class="tx-tc-nodisp"><'+BBs[i]+">",'" class="tx-tc-nodisp">');t=t.replace("</"+BBs[i]+'> <span style="display: none;" class="tx-tc-inlinedisp" id="tx-tc-acropped','<span style="display: none;" class="tx-tc-inlinedisp" id="tx-tc-acropped')}}document.getElementById("tx-tc-ct-box-cttxt-"+e).innerHTML=t}function updatecommentscount(e,t){var n=document.getElementById("tx-tc-ct-cnt-"+e);if(n){if(n.innerHTML.indexOf("icon_comments")>0){var r=n.innerHTML.split('.png">');var i=tctrim(r[1].substr(0,r[1].indexOf("<")));var s=parseInt(i)+parseInt(t);r[1]=s+r[1].substr(r[1].indexOf("<"));var o=r.join('.png">')}else{if(n.innerHTML.indexOf('nbrofcomments srt">')>0){r=n.innerHTML.split('nbrofcomments srt">');i=tctrim(r[1].substr(0,r[1].indexOf("<")));s=parseInt(i)+parseInt(t);r[1]=s+"&nbsp;"+r[1].substr(r[1].indexOf("<"));o=r.join('nbrofcomments srt">')}else{if(n.innerHTML.indexOf('nbrofcomments-1">')>0){r=n.innerHTML.split('nbrofcomments-1">');i=tctrim(r[1].substr(0,r[1].indexOf("<")));s=parseInt(i)+parseInt(t);r[1]=s+r[1].substr(r[1].indexOf("<"));o=r.join('nbrofcomments-1">')}else{r=n.innerHTML.split('nbrofcomments">');i=tctrim(r[1].substr(0,r[1].indexOf("<")));s=parseInt(i)+parseInt(t);r[1]=s+r[1].substr(r[1].indexOf("<"));o=r.join('nbrofcomments">')}}}jQuery("#tx-tc-ct-cnt-"+e).html(o);if(s<=confcommentsPerPage){var u=document.getElementById("tx-tc-cts-ctsbrowse-hide-"+e);if(u){jQuery("#tx-tc-cts-ctsbrowse-hide-"+e).css("display","none")}var a=document.getElementById("tx-tc-cts-ctsbrowse-"+e);if(a){if(tctrim(a.innerHTML)===""){jQuery("#tx-tc-cts-ctsbrowse-"+e).css("display","none")}}}}return 0}function toctoc_comments_pi1_getUploadData(e){var t=[];t["firstname"]=toctoc_comments_pi1_getUserDataField("firstname",e);t["commenttitle"]=toctoc_comments_pi1_getUserDataField("commenttitle",e);t["lastname"]=toctoc_comments_pi1_getUserDataField("lastname",e);t["location"]=toctoc_comments_pi1_getUserDataField("location",e);t["email"]=toctoc_comments_pi1_getUserDataField("email",e);t["homepage"]=toctoc_comments_pi1_getUserDataField("homepage",e);t["itemurl"]=toctoc_comments_pi1_getUserDataField("itemurl",e);t["itemurlchk"]=toctoc_comments_pi1_getUserDataField("itemurlchk",e);t["cid"]=toctoc_comments_pi1_getUserDataField("cid",e);t["level"]=toctoc_comments_pi1_getUserDataField("level",e);t["myfile"]=toctoc_comments_pi1_getUserDataField("uploadpic",e);t["pathim"]=utf8_decode(tcb64_dec(pathim));var n=this.toctoc_comments_pi1_serialize(t);var r=this.toctoc_comments_pi1_base64_encode(n);return r}function tcfilechange_delayed(e,t,n){window.setTimeout("tcfilechange('"+e+"', '"+t+"', '"+n+"')",600);return}function uploadmessage(e,t){information(e,t,function(){});messageon=false;return false}function tcfilechange(e,t,n){var r="cf"+e;var i="toctoc_comments_pi1_"+e+"uploadpicid";var s="toctoc_comments_pi1_"+e+"uploadpicheight";var o="toctoc_comments_pi1_"+e+"originalfilename";var u="toctoc_comments_pi1_"+e+"uploadpic";var a="toctoc_comments_pi1_"+e+"ajax";var f="tx-tc-"+e+"uploaddiv";var l=8;var c=document.getElementById(u);var h="";var p="";var d=0;var v="";var m=true;if(uploadtype==="pdf"){m=false}var g=[];g["path"]=utf8_decode(tcb64_dec(pathim));var y=document.getElementById(a);y.value=n;var b=document.getElementById(i);var w=document.getElementById(s);var E=document.getElementById(o);if(c.files){var S=c.files[0];var x=S.name;if(S.name.length<1){return false}else if(uploadtype==="pic"){if(S.type!=="image/png"&&S.type!=="image/jpg"&&S.type!=="image/gif"&&S.type!=="image/jpeg"){v=utf8_decode(tcb64_dec(textPicFiletypeErr));messageon=true;window.setTimeout("uploadmessage('"+v+"', '"+e+"')",100);return false}if(S.size>picUploadMaxfilesize){v=utf8_decode(tcb64_dec(textPicFileToBig));messageon=true;window.setTimeout("uploadmessage('"+v+"', '"+e+"')",100);return false}}else if(uploadtype==="pdf"){if(S.type!=="application/pdf"&&S.type!=="application/x-pdf"){v=utf8_decode(tcb64_dec(textpdfFiletypeErr));messageon=true;window.setTimeout("uploadmessage('"+v+"', '"+e+"')",100);return false}if(S.size>pdfUploadMaxfilesize){v=utf8_decode(tcb64_dec(textPdfFileToBig));messageon=true;window.setTimeout("uploadmessage('"+v+"', '"+e+"')",100);return false}}var T=new FormData(document.forms.namedItem("n"+r));T.append("myfile",S);T.append("toctoc_comments_pi1[pathim]",g["path"]);T.append("toctoc_comments_pi1[configbaseURL]",utf8_decode(tcb64_dec(configbaseURL)));previewstartedfp[e]=1;setopacity(tcsbmtnme+e,"0.4","tcfilechange");jQuery("#"+f).css("display","none");jQuery("#tx-tc-form-fup-working"+e).css("display","block");jQuery.ajax({url:utf8_decode(tcb64_dec(configbaseURL))+"typo3conf/ext/toctoc_comments/pi1/class.toctoc_comments_attachmentupload.php",type:"POST",data:T,async:false,success:function(t){dataarr=t.split("<br>");h=dataarr[0];p=dataarr[1];d=dataarr[2];previewstartedfp[e]=2},processData:false,contentType:false})}else{alert("Your browser supports no HTML5 uploads (files not supported)")}jQuery("#tx-tc-form-dp-fup-"+e).css("display","none");jQuery("#tx-tc-form-dp-fup-"+e).css("min-height","0px");jQuery("#tx-tc-form-dp-fup-"+e).css("max-height","0px");jQuery("#tx-tc-form-fup-working"+e).css("display","none");if(previewstartedfp[e]===2){document.getElementById("tx-tc-cts-previewfup-"+e).src=p+h;document.getElementById("formhider-"+e).style.height=String(parseInt(document.getElementById("formhider-"+e).offsetHeight)+parseInt(d)+parseInt(l))+"px";jQuery("#tx-tc-form-dp-fup-"+e).css("display","block");jQuery("#tx-tc-cts-previewfup-"+e).css("display","block");jQuery("#tx-tc-cts-nopreviewfup-"+e).css("display","block");jQuery("#tx-tc-cts-pvsfuncsfup-"+e).css("display","block");jQuery("#tx-tc-cts-fuppicprv-"+e).css("display","block");jQuery("#tx-tc-cts-fupta-"+e).css("display","block");jQuery("#toctoc_comments_pi1_uplcontenttextbox_"+e).css("max-height",d+"px");if(!m){document.getElementById("tx-tc-cts-previewfup-"+e).title=x;document.getElementById("tx-tc-cts-nopreviewfup-"+e).title=utf8_decode(tcb64_dec(textclosepdfupload));if(document.getElementById("toctoc_comments_pi1_uplcontenttextbox_"+e).value===""){jQuery("#toctoc_comments_pi1_uplcontenttextbox_"+e).watermark(utf8_decode(tcb64_dec(textpdfdescribe))+' "'+x+'"',{left:0,top:0,fallback:true})}}else{document.getElementById("tx-tc-cts-nopreviewfup-"+e).title=utf8_decode(tcb64_dec(textclosepicupload));if(document.getElementById("toctoc_comments_pi1_uplcontenttextbox_"+e).value===""){jQuery("#toctoc_comments_pi1_uplcontenttextbox_"+e).watermark(utf8_decode(tcb64_dec(textimagedescribe))+' "'+x+'"',{left:0,top:0,fallback:true})}}previewfuph=parseInt(d)+parseInt(l);jQuery("#tx-tc-form-dp-fup-"+e).css("min-height",previewfuph+"px");jQuery("#tx-tc-form-dp-fup-"+e).css("max-height",previewfuph+"px");tttip("t101","#tx-tc-cts-nopreviewfup-"+e+"[title]");jQuery("#"+f).css("display","none");jQuery("#toctoc_comments_pi1_uplcontenttextbox_"+e).css("display","block");previewstartedfp[e]=3;previewfpheight[e]=d;b.value=h;w.value=d;E.value=x}else{jQuery("#tx-tc-form-dp-fup-"+e).css("display","none");jQuery("#tx-tc-form-dp-fup-"+e).css("min-height","0px");jQuery("#tx-tc-form-dp-fup-"+e).css("max-height","0px");jQuery("#tx-tc-cts-fuppicprv-"+e).css("display","none");jQuery("#tx-tc-cts-fupta-"+e).css("display","none");jQuery("#toctoc_comments_pi1_uplcontenttextbox_"+e).css("max-height","0px");jQuery("#"+f).css("display","block");jQuery("#toctoc_comments_pi1_uplcontenttextbox_"+e).css("display","none");previewstartedfp[e]=0;previewfpheight[e]=0;b.value="";w.value="0";E.value="";jQuery("#tx-tc-cts-nopreviewfup-"+e).css("display","none")}setopacity(tcsbmtnme+e,"1","tcfilechange");return true}function tcformatnewdate(e){var t=e;var n=Math.round((new Date).getTime()/1e3)-tclocaltimediff;var r=n-t;var i="";var s=0;var o="";var u=0;for(var a=6;a>0;a=a-1){switch(a){case 1:unit_title=utf8_decode(tcb64_dec(pi1_templatetimeconvminute));o=utf8_decode(tcb64_dec(pi1_templatetimeconvminutes));u=60;break;case 2:unit_title=utf8_decode(tcb64_dec(pi1_templatetimeconvhour));o=utf8_decode(tcb64_dec(pi1_templatetimeconvhours));u=3600;break;case 3:unit_title=utf8_decode(tcb64_dec(pi1_templatetimeconvday));o=utf8_decode(tcb64_dec(pi1_templatetimeconvdays));u=86400;break;case 4:unit_title=utf8_decode(tcb64_dec(pi1_templatetimeconvweek));o=utf8_decode(tcb64_dec(pi1_templatetimeconvweeks));u=604800;break;case 5:unit_title=utf8_decode(tcb64_dec(pi1_templatetimeconvmonth));o=utf8_decode(tcb64_dec(pi1_templatetimeconvmonths));u=2678400;break;case 6:unit_title=utf8_decode(tcb64_dec(pi1_templatetimeconvyear));o=utf8_decode(tcb64_dec(pi1_templatetimeconvyears));u=31536e3;break;default:break}if(r>u-1){var f=r%u;var l=r-f;var c=l/u;r=f;if(s<2){if(c===1){i+=c+" "+unit_title+" "}else{i+=c+" "+o+" "}s=s+1}}}if(s<2){if(r===1){i+=r+" "+utf8_decode(tcb64_dec(pi1_templatetimeconvsecond))+" "}else{i+=r+" "+utf8_decode(tcb64_dec(pi1_templatetimeconvseconds))+" "}}var h=tctrim(utf8_decode(tcb64_dec(pi1_templatetimeconvtextbefore))+" "+i+utf8_decode(tcb64_dec(pi1_templatetimeconvtextafter)));h=h.replace(/-/g,"");return h}function check_dates(){var e=0;var t=0;var n="";var r=0;var s=0;var o="";if(tcservertime!==0){var u=Math.round((new Date).getTime());for(i=tccommnetidstart;i<tccommnetidto;i++){var a=document.getElementById("tx-tc-ctdatetime-"+i);if(a){t=a.innerHTML;o=tcformatnewdate(t);elemdisp=document.getElementById("tx-tc-ctdatedisp-"+i);n="";if(elemdisp){r=elemdisp.innerHTML.length;if(elemdisp.innerHTML.indexOf("&middot;")>1){n="&nbsp;&middot;&nbsp;"}if(elemdisp.innerHTML.indexOf("")>1){n="&nbsp;&middot;&nbsp;"}elemdisp.innerHTML=o+n;s=elemdisp.innerHTML.length;if(r-s>=12&&r-s<=15){n="&nbsp;&middot;&nbsp;";elemdisp.innerHTML=o+n}e++}}}for(i=tccommnetidstart;i<tccommnetidto;i++){a=document.getElementById("tx-tc-rctdatetime-"+i);if(a){t=a.innerHTML;o=tcformatnewdate(t);elemdisp=document.getElementById("tx-tc-rctdatedisp-"+i);n="";if(elemdisp){if(elemdisp.innerHTML.indexOf("&nbsp;")>1){n="&nbsp;&middot;&nbsp;"}elemdisp.innerHTML=o+n;e++}}}cdtime=Math.round((new Date).getTime())-u}if(checkdatedelay===200){if(tcservertime!==0){checkdatedelay=500}else{noajaxreply++;if(noajaxreply>100){console.log("exit waiting for AJAX, no reply");return true}}window.setTimeout("check_dates()",checkdatedelay)}else{if(e===0){return true}checkdatedelay=6e4;window.setTimeout("check_dates()",checkdatedelay)}}function comments_view(e,t,n,r,i){window.setTimeout("comments_view_delayed('"+e+"', '"+t+"', '"+n+"', '"+r+"', '"+i+"')",3e3)}function comments_view_delayed(e,t,n,r,i){jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:true,data:"data="+n+"&pageid="+pageid+"&usr="+t+"&ref="+e+"&cmd=commentsview&storagepid="+i,success:function(e){if(e.length>1){console.log("comments_view_delayed, AJAX returned: "+e)}}})}function selectbb(e,t,n){(function(r){if(document.getElementById("txtcbbmenu").style.display==="block"){document.getElementById("txtcbbmenu").style.display="none";bb_closed=0}if(setupbbcid===false){document.getElementById("txtcbbmenu").innerHTML=utf8_decode(tcb64_dec(tcbbcard));setupbbcid===true}r("#txtcbbmenu").css("top","");r("#txtcbbmenu").css("left","");var i=[];i=findPos(document.getElementById("txtcbbmenu"));xorig=i[0];yorig=i[1];r("#txtcbbmenu").css("top",t-yorig-2*boxmodelLineHeight+"px");r("#txtcbbmenu").css("opacity","1");r("#txtcbbmenu").css("left",e-xorig-20+"px");r("#txtcbbmenu").css("display","block");bb_closed=3500/10;toctoc_comments_bb_show(10);r(".tx-tc-bb-item").off("click");r(".tx-tc-bb-item").on("click",function(){bbclick(this,n)});r(".tx-tc-bbclose").off("click");r(".tx-tc-bbclose").on("click",function(){toctoc_comments_bb_close()})})(jQuery)}function toctoc_comments_bb_fadeout(e){if(bb_closed<3){if(document.getElementById("txtcbbmenu").style.display!=="none"){opanow=getopacity("txtcbbmenu");opanew=parseFloat(opanow)-.1;if(opanew>=.1){setopacity("txtcbbmenu",opanew,"toctoc_comments_bb_fadeout");window.setTimeout("toctoc_comments_bb_fadeout("+e+")",50)}else{document.getElementById("txtcbbmenu").style.display="none";bb_closed=0;return true}}else{return true}}else{bb_closed=bb_closed-1;window.setTimeout("toctoc_comments_bb_fadeout("+e+")",e)}}function toctoc_comments_bb_close(){jQuery("#txtcbbmenu").css("opacity","0");bb_closed=0}function toctoc_comments_bb_show(e){window.setTimeout("toctoc_comments_bb_fadeout("+e+")",e);return true}function insertbb(e,t){var n="";var r="";if(e!=="del"){n="["+e+"]";r="[/"+e+"]"}var s="";var o=String(t).split("6g9");if(o.length===3){s=o[1]}var u=document.getElementById(tctnme+t);var a=tctnme+t;var f=document.getElementById("tx-tc-ct-ry-rl-"+s);var l=0;if(f){if(f.style.display==="none"||jQuery("#"+f.id).hasClass("tx-tc-nodisp")){l=1}}if(!u||l===1){u=document.getElementById("toctoc_comments_pi1_contenttextboxc_"+t);a="toctoc_comments_pi1_contenttextboxc_"+t}if(u){u.focus();var c=u.value.substr(this.caretposstart,this.caretposend-this.caretposstart);var h=u.value.substr(this.caretposstart-n.length,n.length);var p=u.value.substr(this.caretposend,r.length);var d="";if(e==="del"){d=u.value.substr(0,this.caretposstart)+u.value.substr(this.caretposend);replacedlen=0;if(getInternetExplorerVersion()>0){if(u.value===""){window.setTimeout("set_bb_delayed('"+a+"', '"+d+"', '"+replacedlen+"')",600);return}}u.value=d}else{bbedtextstarr=c.split("[");bbedtextetarr=c.split("]");var v="";var m=0;var g=0;if(bbedtextstarr.length>1){for(i=0;i<bbedtextstarr.length-1;i++){if(bbedtextstarr[i].length>v){v=bbedtextstarr[i];g=bbedtextstarr[i].lastIndexOf("]");if(g>0){v=bbedtextstarr[i].substr(g);m=m+g+1}}else{m=m+1+bbedtextstarr[i].length}}}var y="";var b=0;if(bbedtextetarr.length>1){for(i=0;i<bbedtextetarr.length-1;i++){if(bbedtextetarr[i].length>y){y=bbedtextetarr[i];g=bbedtextetarr[i].lastIndexOf("[");if(g>0){y=bbedtextetarr[i].substr(g);b=b+g+1}}else{b=b+1+bbedtextetarr[i].length}}}if(y.length>v.length){m=b;v=y}if(v!==""){this.caretposstart=this.caretposstart+m;this.caretposend=this.caretposstart+v.length;c=v}if(h==n&&p==r){d=u.value.substr(0,this.caretposstart-n.length)+c+u.value.substr(this.caretposend+r.length)}else{d=u.value.substr(0,this.caretposstart)+n+c+r+u.value.substr(this.caretposend)}replacedlen=n.length;if(getInternetExplorerVersion()>0){if(u.value===""){window.setTimeout("set_bb_delayed('"+a+"', '"+d+"', '"+replacedlen+"')",600);return}}u.value=d}this.caretposstart=parseInt(this.caretposstart+replacedlen);this.caretposend=this.caretposstart;setCursorPos(u,this.caretposstart,this.caretposend);toctoc_comments_bb_close()}}function set_bb_delayed(e,t,n){taelem=document.getElementById(e);taelem.value=t;this.caretposstart=parseInt(this.caretposstart)+parseInt(n);this.caretposend=this.caretposstart;setCursorPos(taelem,this.caretposstart,this.caretposend)}function remove_fup_pic(e,t,n,r,i){var s="toctoc_comments_pi1_"+e+"uploadpicid";var o="toctoc_comments_pi1_"+e+"uploadpicheight";var u="toctoc_comments_pi1_"+e+"originalfilename";var a="tx-tc-"+e+"uploaddiv";var f=8;var l=n;var c=[];c["cid"]=e;str1=this.toctoc_comments_pi1_serialize(c);ajaxpreviewopenurl=this.toctoc_comments_pi1_base64_encode(str1);var h=document.getElementById(s);var p=document.getElementById(o);var d=document.getElementById(u);var v=this.toctoc_comments_pi1_base64_encode(d.value);var m=v;jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:true,data:"ref="+e+"&data="+ajaxpreviewopenurl+"&cmd=cleanupfup"+"&dataconf="+r+"&dataconfatt="+i+"&previewid="+h.value+"&originalfilename="+m,success:function(e){}});document.getElementById("tx-tc-cts-previewfup-"+e).src="";jQuery("#"+a).css("display","block");document.getElementById("formhider-"+e).style.height=String(parseInt(document.getElementById("formhider-"+e).offsetHeight)-(parseInt(l)+parseInt(f)))+"px";jQuery("#tx-tc-form-dp-fup-"+e).css("display","none");jQuery("#tx-tc-cts-nopreviewfup-"+e).css("display","none");jQuery("#tx-tc-form-dp-fup-"+e).css("min-height","0px");jQuery("#tx-tc-form-dp-fup-"+e).css("max-height","0px");jQuery("#toctoc_comments_pi1_uplcontenttextbox_"+e).css("display","none");jQuery("#tx-tc-cts-fuppicprv-"+e).css("display","none");jQuery("#tx-tc-cts-fupta-"+e).css("display","none");h.value="";p.value="0";d.value="";previewstartedfp[e]=0;previewfpheight[e]=0;return true}function emoselpage(e,t){(function(n){n("#tx-tc-emopage-"+t).addClass("tx-tc-nodisp");n("#tx-tc-emopage-"+t).removeClass("tx-tc-blockdisp");n("#tx-tc-emopage-"+e).addClass("tx-tc-blockdisp");n("#tx-tc-emopage-"+e).removeClass("tx-tc-nodisp")})(jQuery)}function insertemoji(e){if(e.substr(0,1)==="u"){e=e.replace(/-/g,"%");e="%"+e;tmpcontent=unescape(e);if(tmpcontent.substr(0,2)==="%u"){tmpcontent=tmpcontent.substr(2)}e=tmpcontent}else{if(e.substr(0,2)==="-u"){e=e.replace("-u","%u");tmpcontent=unescape(e);e=tmpcontent}else{e=e+" "}}var t="";var n=String(lastemojicid).split("6g9");if(n.length===3){t=n[1]}var r=document.getElementById(tctnme+lastemojicid);var i=tctnme+lastemojicid;var s=document.getElementById("tx-tc-ct-ry-rl-"+t);var o=0;if(s){if(s.style.display==="none"||jQuery("tx-tc-ct-ry-rl-"+t).hasClass("tx-tc-nodisp")){o=1}}if(!r||o===1){r=document.getElementById("toctoc_comments_pi1_contenttextboxc_"+t);i="toctoc_comments_pi1_contenttextboxc_"+t}if(r){r.focus();var u=r.value.substr(0,this.caretposstart)+e+r.value.substr(this.caretposend);replacedlen=e.length;if(getInternetExplorerVersion()>0){if(r.value===""){window.setTimeout("set_emoji_delayed('"+i+"', '"+u+"')",600);return}}r.value=u;this.caretposstart=parseInt(this.caretposstart)+parseInt(e.length);this.caretposend=this.caretposstart;setCursorPos(r,this.caretposstart,this.caretposend)}}function set_emoji_delayed(e,t){taelem=document.getElementById(e);taelem.value=t;this.caretposstart=parseInt(this.caretposstart)+parseInt(replacedlen);this.caretposend=this.caretposstart;setCursorPos(taelem,this.caretposstart,this.caretposend)}function tt_showlogin(e,t){if(tclogincarddec!==""){htmlloginform=tclogincarddec}else{if(tclogincard!==""){htmlloginform=utf8_decode(tcb64_dec(tclogincard))}else{if(loginRequiredIdLoginForm===""){alert("You need to define TS-Option advanced.loginRequiredIdLoginForm")}}}taelemshw=document.getElementById("formhiderinside-"+e);taelemhdr=document.getElementById("formhider-"+e);if(taelemshw){if(t===0){taelemhdr.innerHTML="";taelemshw.style.display="none"}else{taelemhdr.innerHTML=htmlloginform;taelemshw.style.display="block";savedpwarr=htmlloginform.split('<div class="tx-tc-loginform tx-tc-nodisp" id="tx-tc-loginformfp">');savedpwfrgthtml='<div class="tx-tc-loginform tx-tc-nodisp" id="tx-tc-loginformfp">'+savedpwarr[1];savedpwfrgthtml=savedpwfrgthtml.replace('class="tx-tc-status-for-felogin"','class="tx-tc-status-for-felogin tx-tc-blockdisp"');savedpwfrgthtml=savedpwfrgthtml.replace('<div class="tx-tc-loginform tx-tc-nodisp" id="tx-tc-loginformfp">',"");tt_showloginbind()}}}function tt_showloginbind(){(function(e){e(".tx-tc-login-submitli").on("click",function(){ttc_ajaxfelogin(this)});e("#tx_toctoccomments_pi2_form").on("submit",false);e(".tx-tc-login-submitlo").on("click",function(){ttc_ajaxfelogin(this,1)});e("#tx_toctoccomments_pi2_formlo").on("submit",false);e(".tx-tc-login-submitfo").on("click",function(){ttc_ajaxfeforgotpw(this)});e("#u_0_0").on("click",function(){fbLogin()});e("#tx_toctoccomments_pi2_formfo").on("submit",false);e(".tx-tc-login-submitsu").on("click",function(){ttc_ajaxfesignup(this)});e("#tx_toctoccomments_pi2_formso").on("submit",false);e(".tx-tc-forgotpw").on("click",function(){e("#tx-tc-loginformfp").removeClass("tx-tc-nodisp");e("#tx-tc-loginformfp").addClass("tx-tc-blockdisp");e("#tx_toctoccomments_pi2_form").addClass("tx-tc-nodisp");e("#tx_toctoccomments_pi2_form").removeClass("tx-tc-blockdisp");e("#tx-tc-buttonfornewaccount").addClass("tx-tc-nodisp");e("#tx-tc-buttonfornewaccount").removeClass("tx-tc-blockdisp");e("#tx-tc-status-for-felogin").addClass("tx-tc-nodisp");e("#tx-tc-status-for-felogin").removeClass("tx-tc-blockdisp")});e(".tx-tc-loginbacklink").on("click",function(){e("#tx-tc-status-for-felogin").removeClass("tx-tc-nodisp");e("#tx-tc-status-for-felogin").addClass("tx-tc-blockdisp");e("#tx_toctoccomments_pi2_form").removeClass("tx-tc-nodisp");e("#tx_toctoccomments_pi2_form").addClass("tx-tc-blockdisp");e("#tx-tc-buttonfornewaccount").removeClass("tx-tc-nodisp");e("#tx-tc-buttonfornewaccount").addClass("tx-tc-blockdisp");e("#tx-tc-loginformfp").addClass("tx-tc-nodisp");e("#tx-tc-loginformfp").removeClass("tx-tc-blockdisp")});e("#tx-tc-buttonfornewaccount-bt").on("click",function(){e("#tx-tc-buttonfornewaccount").addClass("tx-tc-nodisp");e("#tx-tc-buttonfornewaccount").removeClass("tx-tc-blockdisp");e("#tx-tc-loginformso").removeClass("tx-tc-nodisp");e("#tx-tc-loginformso").addClass("tx-tc-blockdisp");e("#tx-tc-forgotpw").addClass("tx-tc-nodisp");e("#tx-tc-forgotpw").removeClass("tx-tc-blockdisp")});e("#tx-tc-signonlink").on("click",function(){e("#tx-tc-loginformso").addClass("tx-tc-nodisp");e("#tx-tc-loginformso").removeClass("tx-tc-blockdisp");e("#tx-tc-buttonfornewaccount").removeClass("tx-tc-nodisp");e("#tx-tc-buttonfornewaccount").addClass("tx-tc-blockdisp");e("#tx-tc-forgotpw").addClass("tx-tc-blockdisp");e("#tx-tc-forgotpw").removeClass("tx-tc-nodisp")})})(jQuery)}var tctreestate=[];var tcelemstate=[];var previewstarted=[];var previewstartedfp=[];var previewfpheight=[];var previewselpreviewid=[];var previewcountnr=[];var previewfpcountnr=[];var previewhtml=[];var previewselcomment=[];var previewstartedfup=[];var previewselpic=[];var acroppeds=[];var commentsAjaxData=[];var commentsAjaxDataImg=[];var commentsAjaxThisData=[];var commentsAjaxDataC=[];var commentsAjaxDataAtt=[];var commentsAjaxDataLogin=[];var commentsAjaxDataLoginSess=[];var commentsAjaxDataLogout=[];var editsavehtml="";var edithtml="";var editsavebthtml="";var edithtmlkit="";var editon=false;var edituid=0;var previewon=false;var editsavenamehtml="";var messageon=false;var submitopaccontrol=2;var logomargin="";var currentcommenttext=[];var htmlloginform="";var lastshownloginformid="";var overlogout=0;var tctnme="toctoc_comments_pi1_contenttextbox_";var tcsbmtnme="toctoc_comments_pi1_submit_";var uploadtype="pic";var uc_closed=[];var caretposstart=0;var caretposend=0;var formhidermoreheightsecondlap=0;var htmlretcodesave=0;var commenttitletitlehtml="";var tclocaltimediff=0;var checkdatedelay=200;var tcservertime=0;var noajaxreply=0;var setupbbcid=false;var bb_closed=0;var replacedlen=0;var savedpwfrgthtml="";var tclogincarddec="";var savefpformhtml="";var fbconnected=false;if(tcdateformat===0){jQuery.ajax({type:"POST",url:"index.php?eID=toctoc_comments_ajax",async:true,data:"ref="+0+"&cmd=gettime",success:function(e){tcservertime=parseInt(e);tclocaltimediff=Math.round((new Date).getTime()/1e3)-tcservertime}});check_dates()}if(tcsmiliecard!==""){var tcsmiliecardhtml=utf8_decode(tcb64_dec(tcsmiliecard))}if(tcbbcard!==""){var tcbbcardhtml=utf8_decode(tcb64_dec(tcbbcard))}